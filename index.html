<!doctype html>

<html lang="en" style="height: 100%;">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#0a1628">
  <meta name="description" content="FocusFlex keeps assignments, schedules, notes, and study routines in one focused workspace built for real student momentum, especially for students with ADHD.">
  <link rel="manifest" href="manifest.webmanifest">
  <link rel="icon" href="assets/main-logo.svg" type="image/svg+xml">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <title>FocusFlex</title>
  <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <noscript><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet"></noscript>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html, body {
      width: 100%;
      height: 100%;
      margin: 0;
      font-family: Inter, system-ui, -apple-system, sans-serif;
    }

    :root {
  --titan-primary: #0d0d0d;
  --titan-accent: #f8f8f8;
  --sidebar-gradient: linear-gradient(180deg, #0d0d0d 0%, #1a1a1a 100%);
  --accent-color: #f8f8f8;
  --lux-text-main: #0f172a;
  --lux-text-sub: #475569;
  --lux-border: #e2e8f0;
  --lux-hover: #f8fafc;
  --lux-card: #ffffff;
  --content-overlay: rgba(255,255,255,0.94);
  --header-overlay-strong: rgba(2, 6, 23, 0.84);
  --header-overlay-soft: rgba(15, 23, 42, 0.78);
  --lux-danger: #ef4444;
  --lux-success: #22c55e;
  --lux-warning: #f59e0b;
  --brand-blue: #2563eb;
}

body {
  background: #ffffff;
  color: var(--lux-text-main);
  transition: background-color 0.3s ease;
  font-weight: 400;
  overflow-x: hidden;
}

body.dark-mode {
  background: #0f172a;
  --lux-text-main: #f1f5f9; --lux-text-sub: #dbe7f5; --lux-border: #334155;
  --lux-hover: #1e293b; --lux-card: #0f172a;
  --sidebar-gradient: linear-gradient(180deg, #0a0e27 0%, #0d1829 100%);
  --content-overlay: rgba(8,12,26,0.9);
  --header-overlay-strong: rgba(2, 6, 23, 0.9);
  --header-overlay-soft: rgba(15, 23, 42, 0.86);
}

body.font-dyslexic { font-family: 'OpenDyslexic', 'Courier New', monospace; }

.appShell {
  min-height: 100vh;
  width: 100%;
  max-width: 1280px;
  margin: 0 auto;
  padding: 16px;
}

.layout {
  display: grid;
  grid-template-columns: 260px 1fr;
  gap: 16px;
  align-items: stretch;
}

.main-wrapper {
  width: 100%;
  min-height: calc(100vh - 32px);
}

#appBg {
  position: fixed; top: 0; left: 0; right: 0; bottom: 0;
  background: linear-gradient(180deg, #eef2f7 0%, #e2e8f0 100%);
  z-index: 0; transition: background 0.4s ease;
}
body.dark-mode #appBg { background: linear-gradient(180deg, #0b1220 0%, #111827 100%); }

/* SIDEBAR */
.sidebar {
  width: 100%; background: var(--sidebar-gradient); color: var(--accent-color);
  padding: 28px 24px; overflow-y: auto; border-right: 1px solid rgba(255,255,255,0.12);
  z-index: 100; position: relative; flex-shrink: 0; transition: all 0.4s ease;
  box-shadow: inset 0 0 80px rgba(255,255,255,0.08);
}
body.dark-mode .sidebar { border-right-color: rgba(255,255,255,0.08); box-shadow: inset 0 0 80px rgba(0,0,0,0.3); }
.sidebar-header { margin-bottom: 40px; padding-bottom: 24px; border-bottom: 1px solid rgba(255,255,255,0.15); }
.sidebar-title { font-size: 28px; font-weight: 600; letter-spacing: -0.02em; color: var(--titan-accent); }
.sidebar-subtitle { font-size: 10px; text-transform: uppercase; letter-spacing: 1.8px; opacity: 0.7; font-weight: 800; color: rgba(255,255,255,0.8); }
.sidebar-section { margin-bottom: 32px; }
.sidebar-section-title { font-size: 9px; text-transform: uppercase; letter-spacing: 1.8px; font-weight: 900; margin-bottom: 14px; opacity: 0.55; color: rgba(255,255,255,0.7); }

.sidebar-btn {
  width: 100%; text-align: left; background: rgba(255,255,255,0.08);
  border: 1px solid rgba(255,255,255,0.12); color: rgba(255,255,255,0.85);
  padding: 12px 16px; border-radius: 8px; font-size: 13px; font-weight: 500;
  cursor: pointer; margin-bottom: 8px; transition: all 0.25s cubic-bezier(0.4,0,0.2,1);
}
.sidebar-btn:hover { background: rgba(255,255,255,0.18); border-color: rgba(255,255,255,0.25); transform: translateX(6px); box-shadow: 0 12px 32px rgba(0,0,0,0.2); color: #fff; }
.sidebar-btn.active { background: linear-gradient(135deg, rgba(255,255,255,0.95), rgba(255,255,255,0.9)); border-color: #fff; color: var(--titan-primary); font-weight: 700; box-shadow: 0 16px 40px rgba(0,0,0,0.25); transform: translateX(6px); }


.ui-icon { display: inline-flex; align-items: center; justify-content: center; width: 1.05em; height: 1.05em; vertical-align: -0.14em; }
.ui-icon svg { width: 100%; height: 100%; stroke: currentColor; fill: none; stroke-width: 1.9; stroke-linecap: round; stroke-linejoin: round; }
.icon-lg { width: 1.35em; height: 1.35em; }
.icon-xl { width: 1.5em; height: 1.5em; }
.sidebar-btn .ui-icon, .mobile-nav button .ui-icon { margin-right: 8px; }

.sidebar-about { padding: 16px; background: rgba(255,255,255,0.06); border: 1px solid rgba(255,255,255,0.12); border-radius: 8px; font-size: 11px; color: rgba(255,255,255,0.75); line-height: 1.6; }
.sidebar-about-title { font-weight: 700; margin-bottom: 8px; color: rgba(255,255,255,0.9); font-size: 12px; }
.sidebar-about-text { margin-bottom: 12px; }
.sidebar-policy { margin-top: 12px; padding-top: 12px; border-top: 1px solid rgba(255,255,255,0.12); display: grid; gap: 6px; }
.sidebar-policy strong { color: rgba(255,255,255,0.92); font-size: 10px; letter-spacing: 0.2px; }
.sidebar-policy p { margin: 0; font-size: 10px; color: rgba(255,255,255,0.74); line-height: 1.45; }
.sidebar-reset-btn { background: none; border: none; color: rgba(255,255,255,0.6); cursor: pointer; font-weight: 700; padding: 0; font-size: 10px; text-transform: uppercase; letter-spacing: 1px; }
.sidebar-reset-btn:hover { color: #fff; }

/* MAIN */
.main-content { flex: 1; min-width: 0; display: flex; flex-direction: column; position: relative; z-index: 1; overflow: hidden; }

.app-header {
  background: linear-gradient(120deg, #0f172a 0%, #1e293b 100%);
  border: 1px solid rgba(255,255,255,0.1);
  border-left: none;
  border-right: none;
  padding: 16px 32px;
  display: flex; justify-content: space-between; align-items: center;
  z-index: 50;
  box-shadow: 0 14px 30px rgba(1, 6, 20, 0.3), inset 0 1px 0 rgba(255,255,255,0.08);
  position: relative; overflow: hidden;
  backdrop-filter: blur(8px);
}
.app-header::before {
  content: ''; position: absolute; top: 0; left: 0; right: 0; height: 1px;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.35), transparent);
}
.app-header::after { display: none; }

.onboarding-overlay {
  position: fixed;
  inset: 0;
  z-index: 2100;
  background: rgba(2, 6, 23, 0.82);
  display: none;
  align-items: center;
  justify-content: center;
  padding: 16px;
}
.onboarding-overlay.active { display: flex; }
.onboarding-card {
  width: min(680px, 100%);
  background: var(--lux-card);
  border: 1px solid var(--lux-border);
  border-radius: 16px;
  padding: 22px;
}
.onboarding-progress { font-size: 11px; color: var(--lux-text-sub); margin-bottom: 10px; font-weight: 700; }
.onboarding-step { display: none; }
.onboarding-step.active { display: block; }
.onboarding-step h3 { font-size: 20px; margin-bottom: 8px; }
.onboarding-step p { color: var(--lux-text-sub); line-height: 1.5; margin-bottom: 10px; }
.onboarding-actions { display: flex; justify-content: space-between; gap: 10px; margin-top: 14px; flex-wrap: wrap; }

.feature-tip {
  padding: 10px 14px;
  border-bottom: 1px solid var(--lux-border);
  font-size: 12px;
  color: var(--lux-text-sub);
  background: var(--lux-hover);
}
.sidebar-feature-desc {
  display: block;
  margin-top: 2px;
  font-size: 10px;
  font-weight: 500;
  opacity: 0.8;
}

.task-stepper { display: flex; gap: 8px; margin-bottom: 10px; flex-wrap: wrap; }
.task-step-dot {
  border: 1px solid var(--lux-border);
  border-radius: 999px;
  padding: 4px 10px;
  font-size: 11px;
  color: var(--lux-text-sub);
  background: var(--lux-card);
}
.task-step-dot.active { background: #0f172a; color: #fff; }
.task-step-pane { display: none; }
.task-step-pane.active { display: grid; gap: 10px; }
.quick-subject-row { display: flex; gap: 8px; flex-wrap: wrap; }
.quick-subject-btn { min-height: 36px; padding: 6px 10px; border-radius: 999px; border: 1px solid var(--lux-border); background: var(--lux-card); }

.first-time-tip {
  margin-top: 8px;
  padding: 10px;
  border-radius: 8px;
  border: 1px solid rgba(255,255,255,0.2);
  background: rgba(255,255,255,0.08);
  font-size: 11px;
}

.header-left { display: flex; align-items: center; gap: 14px; z-index: 2; min-width: 0; }
.header-logo {
  height: 52px;
  width: 176px;
  flex-shrink: 0;
  object-fit: contain;
  object-position: left center;
  filter: drop-shadow(0 8px 18px rgba(0, 0, 0, 0.32));
}
.header-brand { display: flex; flex-direction: column; gap: 1px; }
.header-eyebrow {
  font-size: 10px; letter-spacing: 1.6px; text-transform: uppercase;
  font-weight: 700; color: #e2e8f0;
}
.header-title {
  font-size: 24px; font-weight: 600; line-height: 1;
  color: var(--titan-accent); text-transform: none; letter-spacing: -0.02em;
  text-shadow: 0 2px 12px rgba(2, 6, 23, 0.72);
}
.header-subtitle { font-size: 12px; color: #dbe7f5; font-weight: 500; letter-spacing: 0.3px; }
.mobile-header-subtitle {
  display: none;
  font-size: 12px;
  color: #ffffff;
  font-weight: 500;
  letter-spacing: 0.3px;
}
.header-actions { display: flex; gap: 14px; align-items: center; z-index: 2; margin-left: auto; }
.global-search {
  width: min(340px, 38vw);
  background: rgba(15, 23, 42, 0.74);
  border: 1px solid rgba(226,232,240,0.42);
  color: #f8fafc;
}
.global-search::placeholder { color: rgba(226,232,240,0.72); }

.navigation-assist {
  display: flex; align-items: center; justify-content: space-between; gap: 10px;
  margin: 0 auto 18px; max-width: 900px; padding: 10px 14px;
  border: 1px solid var(--lux-border); border-radius: 10px; background: var(--lux-card);
}
.breadcrumb-wrap { display: flex; align-items: center; gap: 8px; flex-wrap: wrap; }
.breadcrumb-label { font-size: 10px; text-transform: uppercase; letter-spacing: 0.8px; color: var(--lux-text-sub); font-weight: 700; }
.breadcrumb-current { font-size: 13px; color: var(--lux-text-main); font-weight: 700; }
.back-btn {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 6px 12px;
  min-height: 36px;
  font-size: 11px;
  font-weight: 600;
  border-radius: 8px;
  color: var(--lux-text-sub);
  background: var(--lux-card);
  border: 1px solid var(--lux-border);
}
.back-btn:hover {
  background: var(--lux-hover);
  color: var(--lux-text-main);
}

.panel-focus-ring:focus-visible,
.settings-panel :is(button, input, select, textarea, [tabindex]):focus-visible,
.sidebar button:focus-visible,
.mobile-nav button:focus-visible,
.pro-select:focus-visible,
.pro-input:focus-visible {
  outline: 2px solid var(--titan-accent);
  outline-offset: 2px;
  box-shadow: 0 0 0 3px rgba(15, 23, 42, 0.35);
}
body.dark-mode .panel-focus-ring:focus-visible,
body.dark-mode .settings-panel :is(button, input, select, textarea, [tabindex]):focus-visible,
body.dark-mode .sidebar button:focus-visible,
body.dark-mode .mobile-nav button:focus-visible,
body.dark-mode .pro-select:focus-visible,
body.dark-mode .pro-input:focus-visible {
  box-shadow: 0 0 0 3px rgba(248, 250, 252, 0.24);
}

.header-status-pill {
  display: inline-flex; align-items: center; gap: 8px;
  border: 1px solid rgba(255,255,255,0.22);
  border-radius: 999px; padding: 9px 12px;
  font-size: 11px; font-weight: 700; letter-spacing: 0.5px;
  color: #f8fafc;
  background: linear-gradient(135deg, rgba(2,6,23,0.82), rgba(15,23,42,0.74));
}
.status-dot {
  width: 7px; height: 7px; border-radius: 50%; background: #22c55e;
  box-shadow: 0 0 0 4px rgba(34,197,94,0.16);
}

.header-btn {
  background: linear-gradient(135deg, rgba(15,23,42,0.86), rgba(30,41,59,0.8));
  border: 1px solid rgba(226,232,240,0.58); width: 44px; height: 44px; border-radius: 12px;
  cursor: pointer; display: flex; align-items: center; justify-content: center;
  color: var(--titan-accent); font-weight: 700; font-size: 18px;
  transition: all .15s ease;
  box-shadow: 0 8px 18px rgba(0,0,0,0.25);
}
.header-btn:hover {
  background: linear-gradient(135deg, rgba(30,41,59,0.94), rgba(51,65,85,0.86));
  transform: translateY(-1px); box-shadow: 0 12px 24px rgba(0,0,0,0.33); filter: brightness(1.05);
}
.header-btn:active { transform: scale(0.97); }

.install-btn {
  width: auto; min-width: 116px; padding: 0 16px; font-size: 12px;
  font-weight: 700; letter-spacing: 0.4px;
}

.app-container {
  flex: 1; overflow-y: auto; padding: 28px;
  background: var(--content-overlay);
  backdrop-filter: blur(1px);
}
.bento-grid { display: grid; grid-template-columns: 1fr; gap: 28px; max-width: 960px; margin: 0 auto; width: 100%; }

.section-wrapper {
  display: none !important;
  contain-intrinsic-size: 1000px;
  content-visibility: auto;
}
.section-wrapper.active { display: block !important; }

@media (max-width: 768px) {
  .section-wrapper {
    content-visibility: visible;
    contain-intrinsic-size: auto;
  }
}

.card { background: var(--lux-card); border-radius: 16px; border: 1px solid rgba(148, 163, 184, 0.24); box-shadow: 0 6px 20px rgba(0,0,0,0.06); overflow: hidden; }
body.dark-mode .card { box-shadow: 0 6px 20px rgba(0,0,0,0.28); border-color: rgba(148, 163, 184, 0.3); }
.card-header { padding: 22px; background: linear-gradient(135deg, rgba(0,0,0,0.03), rgba(0,0,0,0.01)); border-bottom: 1px solid var(--lux-border); display: flex; justify-content: space-between; align-items: center; }
body.dark-mode .card-header { background: linear-gradient(135deg, rgba(255,255,255,0.05), rgba(255,255,255,0.02)); }
.card-title { display: flex; align-items: center; gap: 12px; font-size: 16px; font-weight: 600; color: var(--titan-primary); letter-spacing: -0.01em; }
body.dark-mode .card-title { color: var(--titan-accent); }

/* DASHBOARD */
.dashboard-container { padding: 52px; display: flex; flex-direction: column; gap: 44px; }
.dashboard-header { display: grid; grid-template-columns: 1fr 1fr; gap: 48px; align-items: start; }
.dashboard-left { display: flex; flex-direction: column; gap: 24px; }
.dashboard-logo { width: 128px; height: 128px; border-radius: 18px; background: linear-gradient(135deg, rgba(0,0,0,0.06), rgba(0,0,0,0.03)); border: 1px solid rgba(0,0,0,0.1); display: flex; align-items: center; justify-content: center; }
.dashboard-logo img { width: 82%; height: 82%; object-fit: contain; }
.dashboard-title-section h1 { font-size: 56px; font-weight: 600; color: var(--lux-text-main); margin: 0 0 8px 0; line-height: 1; letter-spacing: -0.03em; }
.dashboard-title-section .brand-app-name { color: var(--titan-accent); }
.dashboard-title-section h2 { font-size: 11px; letter-spacing: 0.08em; font-weight: 500; text-transform: uppercase; color: var(--lux-text-sub); margin: 0 0 10px 0; }
.dashboard-title-section p { font-size: 13px; color: var(--lux-text-sub); margin: 0; font-weight: 500; }
.dashboard-info-cards { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
.dashboard-info-card { padding: 22px; border-radius: 16px; border: 1px solid rgba(148, 163, 184, 0.22); box-shadow: 0 6px 20px rgba(0,0,0,0.06); }
.dashboard-info-card.dark { background: linear-gradient(135deg, rgba(13,13,13,0.95), rgba(26,26,26,0.9)); border-color: rgba(0,0,0,0.2); }
.dashboard-info-card.light { background: linear-gradient(135deg, #ffffff, #f1f5f9); }
.dashboard-info-label { font-size: 10px; text-transform: uppercase; letter-spacing: 0.07em; font-weight: 500; margin-bottom: 10px; }
.dashboard-info-card.dark .dashboard-info-label { color: rgba(255,255,255,0.5); }
.dashboard-info-card.light .dashboard-info-label { color: #334155; }
.dashboard-info-value { font-size: 28px; font-weight: 600; letter-spacing: -0.02em; }
.dashboard-info-card.dark .dashboard-info-value { color: var(--titan-accent); }
.dashboard-info-card.light .dashboard-info-value { color: var(--brand-blue); }

.dashboard-section { border-top: 1px solid var(--lux-border); padding-top: 30px; display: grid; gap: 14px; }
.dashboard-section-header { display: flex; justify-content: space-between; align-items: center; gap: 12px; }
.dashboard-section-label { font-size: 11px; color: var(--lux-text-sub); text-transform: uppercase; letter-spacing: 0.08em; font-weight: 500; }
.dashboard-callout {
  position: relative;
  background: linear-gradient(135deg, color-mix(in srgb, var(--titan-accent) 18%, white 82%), color-mix(in srgb, var(--titan-accent) 8%, white 92%));
  border: 1px solid color-mix(in srgb, var(--titan-accent) 48%, white 52%);
  border-radius: 14px;
  padding: 16px;
  display: grid;
  gap: 10px;
  box-shadow: 0 10px 26px color-mix(in srgb, var(--titan-accent) 26%, transparent 74%);
}
.dashboard-callout::before {
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 4px;
  border-radius: 14px 0 0 14px;
  background: linear-gradient(180deg, var(--titan-accent), color-mix(in srgb, var(--titan-accent) 56%, #000 44%));
}
.dashboard-callout-empty {
  padding: 12px;
  border-radius: 10px;
  background: color-mix(in srgb, var(--lux-card) 88%, white 12%);
  border: 1px dashed color-mix(in srgb, var(--titan-accent) 32%, var(--lux-border) 68%);
  color: var(--lux-text-sub);
  font-size: 12px;
}


.quote-box { position:relative; padding: 26px 30px; background: linear-gradient(135deg, var(--lux-hover), var(--lux-card)); border: 1px solid var(--lux-border); border-radius: 16px; border-left: 4px solid var(--brand-blue); min-height: 80px; box-shadow: 0 6px 20px rgba(0,0,0,0.06); }
.quote-text { font-size: 16px; font-style: italic; color: var(--lux-text-main); font-weight: 400; line-height: 1.6; margin-bottom: 8px; transition: opacity 0.4s ease; }
.quote-author { font-size: 12px; color: var(--lux-text-sub); font-weight: 500; letter-spacing: 0.2px; transition: opacity 0.4s ease; }
.quote-refresh-btn { position:absolute; top:12px; right:12px; background:var(--lux-hover); border:1px solid var(--lux-border); border-radius:10px; width:32px; height:32px; cursor:pointer; display:flex; align-items:center; justify-content:center; font-size:12px; color:var(--lux-text-sub); transition:all .15s ease; }

.quick-actions-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
.quick-action-btn { display:flex; align-items:center; gap:12px; padding:18px 20px; border-radius:16px; cursor:pointer; text-align:left; font-family:inherit; transition:all .15s ease; border:1px solid var(--lux-border); }
.quick-action-btn strong { font-size:13px; font-weight:600; display:block; }
.quick-action-btn span { font-size:11px; color:var(--lux-text-sub); }
.quick-action-btn.primary { background:linear-gradient(135deg, #1d4ed8, #1e40af); color:#eff6ff; border-color:transparent; }
.quick-action-btn.primary span { color: rgba(239,246,255,0.8); }
.quick-action-btn.secondary { background:var(--lux-hover); color:var(--lux-text-main); }

.card-title .ui-icon,
.quick-action-btn.secondary .ui-icon,
.quote-refresh-btn,
.dashboard-logo {
  color: var(--brand-blue);
}

.sidebar-btn,
.ghost-btn,
.primary-btn,
.danger-btn,
.edit-btn,
.header-btn,
.mobile-nav button,
.confirm-cancel,
.confirm-delete,
.pro-input,
.pro-select,
.habit-check,
.hamburger-btn,
.back-btn,
.quick-action-btn,
.quote-refresh-btn {
  transition: all .15s ease;
}

.sidebar-btn:hover,
.ghost-btn:hover,
.primary-btn:hover,
.danger-btn:hover,
.edit-btn:hover,
.quick-action-btn:hover,
.quote-refresh-btn:hover,
.back-btn:hover { filter: brightness(1.03); }

.sidebar-btn:active,
.ghost-btn:active,
.primary-btn:active,
.danger-btn:active,
.edit-btn:active,
.quick-action-btn:active,
.quote-refresh-btn:active,
.back-btn:active { transform: scale(0.98); }

/* FORMS & INPUTS */
.pro-input {
  background: var(--lux-card); border: 1px solid var(--lux-border); border-radius: 8px;
  padding: 10px 14px; font-size: 13px; color: var(--lux-text-main); font-family: inherit;
  transition: all 0.2s; width: 100%;
}
.pro-input:focus { outline: none; border-color: var(--titan-primary); box-shadow: 0 0 0 2px rgba(0,0,0,0.08); }
body.dark-mode .pro-input { background: #1e293b; }
body.dark-mode .pro-input:focus { border-color: var(--titan-accent); box-shadow: 0 0 0 2px rgba(255,255,255,0.08); }
.pro-input::placeholder { color: var(--lux-text-sub); }

.pro-select {
  background: var(--lux-card); border: 1px solid var(--lux-border); border-radius: 8px;
  padding: 10px 14px; font-size: 13px; color: var(--lux-text-main); font-family: inherit;
  width: 100%; cursor: pointer; appearance: none;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%2364748b' d='M6 8L1 3h10z'/%3E%3C/svg%3E");
  background-repeat: no-repeat; background-position: right 12px center;
}
body.dark-mode .pro-select { background-color: #1e293b; }

.form-field { display: grid; gap: 6px; min-width: 0; }
.form-label {
  font-size: 11px;
  font-weight: 700;
  letter-spacing: 0.2px;
  color: var(--lux-text-sub);
}

.primary-btn {
  background: linear-gradient(135deg, var(--titan-primary), rgba(0,0,0,0.75));
  color: var(--titan-accent); border: 1px solid var(--titan-primary);
  padding: 11px 20px; border-radius: 10px; font-size: 13px; font-weight: 700;
  cursor: pointer; transition: all 0.2s; font-family: inherit;
}
.primary-btn:hover { transform: translateY(-1px); box-shadow: 0 4px 12px rgba(0,0,0,0.2); }
.primary-btn:active { transform: translateY(0); }

.danger-btn {
  background: var(--lux-danger); color: white; border: none;
  padding: 10px 14px; border-radius: 10px; font-size: 12px; font-weight: 700;
  cursor: pointer; transition: all 0.2s; font-family: inherit;
  display: inline-flex; align-items: center; gap: 6px;
}
.danger-btn:hover { opacity: 0.85; }

.focus-grid { display: grid; grid-template-columns: 1.1fr 0.9fr; gap: 16px; margin-top: 16px; }
.focus-card { border: 1px solid var(--lux-border); border-radius: 12px; padding: 16px; background: var(--lux-hover); }
.focus-time { font-size: 40px; font-weight: 900; letter-spacing: 1px; color: var(--lux-text-main); margin: 8px 0 12px; }
.focus-chip { display: inline-flex; padding: 4px 10px; border-radius: 999px; font-size: 10px; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; border: 1px solid var(--lux-border); color: var(--lux-text-sub); }
.focus-status { margin-top: 10px; font-size: 11px; color: var(--lux-text-sub); min-height: 16px; }
.focus-status.good { color: var(--lux-success); }
.focus-status.warn { color: var(--lux-warning); }
.focus-status.bad { color: var(--lux-danger); }
.habit-item { display:flex; align-items:center; justify-content:space-between; gap:8px; padding:10px 0; border-bottom:1px solid var(--lux-border); }
.habit-item:last-child { border-bottom:none; }
.habit-check { width: 18px; height: 18px; border-radius: 4px; border: 2px solid var(--lux-border); cursor: pointer; display:inline-flex; align-items:center; justify-content:center; font-size: 11px; }
.habit-check.done { background: var(--lux-success); border-color: var(--lux-success); color: #fff; }

@media (max-width: 900px) {
  .focus-grid { grid-template-columns: 1fr; }
}

.edit-btn {
  background: var(--lux-hover); color: var(--lux-text-sub); border: 1px solid var(--lux-border);
  padding: 10px 14px; border-radius: 10px; font-size: 12px; font-weight: 700;
  cursor: pointer; transition: all 0.2s; font-family: inherit;
  display: inline-flex; align-items: center; gap: 6px;
}
.edit-btn:hover { background: var(--lux-border); color: var(--lux-text-main); }

.ghost-btn {
  background: var(--lux-hover); color: var(--lux-text-main); border: 1px solid var(--lux-border);
  padding: 10px 16px; border-radius: 10px; font-size: 12px; font-weight: 700;
  cursor: pointer; transition: all 0.2s; font-family: inherit;
}
.ghost-btn:hover { background: var(--lux-border); }


/* TASK ITEMS */
.task-item {
  display: flex; align-items: flex-start; gap: 14px; padding: 16px 16px;
  border: 1px solid var(--lux-border); border-radius: 10px; background: var(--lux-hover);
  transition: all 0.2s; margin-bottom: 8px; border-left: 4px solid var(--lux-border);
}
.task-item:hover { box-shadow: 0 4px 12px rgba(0,0,0,0.06); }
.task-item.completed { opacity: 0.5; }
.task-item.completed .task-title { text-decoration: line-through; }

.task-checkbox {
  width: 44px; height: 44px; border-radius: 10px; border: 2px solid var(--lux-border);
  cursor: pointer; flex-shrink: 0; display: flex; align-items: center;
  justify-content: center; transition: all 0.2s; background: var(--lux-card);
  appearance: none; -webkit-appearance: none;
}
.task-checkbox:hover { border-color: var(--titan-primary); }
.task-checkbox.checked { background: var(--lux-success); border-color: var(--lux-success); }
.task-checkbox.checked::after { content: 'âœ“'; color: white; font-size: 18px; font-weight: 700; }

.task-body { flex: 1; min-width: 0; }
.task-title { font-size: 14px; font-weight: 600; color: var(--lux-text-main); margin-bottom: 4px; }
.task-meta { font-size: 11px; color: var(--lux-text-sub); display: flex; gap: 12px; flex-wrap: wrap; align-items: center; }
.task-actions { display: flex; gap: 6px; flex-shrink: 0; }

.subject-badge {
  display: inline-flex; align-items: center; gap: 4px; padding: 5px 12px;
  border-radius: 999px; font-size: 11px; font-weight: 700; letter-spacing: 0.2px;
}

.priority-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  display: inline-block;
  margin-right: 6px;
  flex-shrink: 0;
  vertical-align: middle;
}
.priority-high { background: #dc2626; }
.priority-medium { background: #eab308; }
.priority-low { background: #16a34a; }
.priority-label {
  font-weight: 700;
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 2px 8px;
  border-radius: 999px;
}
.task-meta .priority-high { color: #ffffff; background: #dc2626; }
.task-meta .priority-medium { color: #1f2937; background: #eab308; }
.task-meta .priority-low { color: #ffffff; background: #16a34a; }

.priority-options {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 8px;
  margin-top: 8px;
}

.priority-option-chip {
  font-size: 12px;
  font-weight: 700;
  border-radius: 10px;
  padding: 8px 10px;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  border: 2px solid transparent;
  cursor: pointer;
  transition: transform 0.2s ease, border-color 0.2s ease, box-shadow 0.2s ease;
}

.priority-option-chip:hover {
  transform: translateY(-1px);
  box-shadow: 0 6px 18px rgba(15, 23, 42, 0.12);
}

.priority-option-chip input {
  position: absolute;
  opacity: 0;
  pointer-events: none;
}

.priority-option-chip.selected {
  border-color: rgba(15, 23, 42, 0.35);
}

body.dark-mode .priority-option-chip.selected {
  border-color: rgba(248, 250, 252, 0.55);
}

.priority-option-chip.high { color: #991b1b; background: #fee2e2; }
.priority-option-chip.medium { color: #854d0e; background: #fef9c3; }
.priority-option-chip.low { color: #166534; background: #dcfce7; }

@media (max-width: 768px) {
  .priority-options {
    grid-template-columns: 1fr;
  }
}

.filter-bar { display: flex; gap: 8px; flex-wrap: wrap; padding: 16px 20px; border-bottom: 1px solid var(--lux-border); }
.filter-chip {
  padding: 10px 16px; border-radius: 999px; font-size: 12px; font-weight: 700;
  cursor: pointer; border: 1px solid var(--lux-border); background: var(--lux-card);
  color: var(--lux-text-sub); transition: all 0.2s;
}
.filter-chip:hover { border-color: var(--lux-text-sub); }
.filter-chip.active { background: var(--titan-primary); color: var(--titan-accent); border-color: var(--titan-primary); }

/* SCHEDULE */
.schedule-block {
  padding: 16px; border: 1px solid var(--lux-border); border-radius: 10px;
  background: var(--lux-hover); margin-bottom: 8px; display: flex; justify-content: space-between;
  align-items: center; transition: all 0.2s;
}
.schedule-block:hover { box-shadow: 0 4px 12px rgba(0,0,0,0.06); }
.schedule-period { font-size: 11px; font-weight: 800; text-transform: uppercase; letter-spacing: 1px; color: var(--lux-text-sub); margin-bottom: 4px; }
.schedule-class { font-size: 15px; font-weight: 700; color: var(--lux-text-main); }
.schedule-time { font-size: 12px; color: var(--lux-text-sub); font-weight: 500; }
.schedule-room { font-size: 11px; color: var(--lux-text-sub); background: var(--lux-card); padding: 4px 10px; border-radius: 6px; border: 1px solid var(--lux-border); }

/* NOTES */
.note-card {
  padding: 16px; border: 1px solid var(--lux-border); border-radius: 10px;
  background: var(--lux-hover); margin-bottom: 8px; cursor: pointer; transition: all 0.2s;
}
.note-card:hover { box-shadow: 0 4px 12px rgba(0,0,0,0.06); }
.note-card-title { font-size: 14px; font-weight: 700; color: var(--lux-text-main); margin-bottom: 6px; }
.note-card-preview { font-size: 12px; color: var(--lux-text-sub); line-height: 1.5; overflow: hidden; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; }
.note-card-date { font-size: 10px; color: var(--lux-text-sub); margin-top: 8px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; }

.note-editor {
  width: 100%; min-height: 200px; background: var(--lux-card); border: 1px solid var(--lux-border);
  border-radius: 8px; padding: 14px; font-size: 13px; color: var(--lux-text-main);
  font-family: inherit; resize: vertical; line-height: 1.6;
}
body.dark-mode .note-editor { background: #1e293b; }
.note-editor:focus { outline: none; border-color: var(--titan-primary); }

.note-toolbar { display:flex; gap:10px; padding:14px 20px; border-bottom:1px solid var(--lux-border); background:var(--lux-hover); flex-wrap:wrap; }
.note-toolbar .pro-input, .note-toolbar .pro-select { min-width: 160px; }
.note-meta-grid { display:grid; gap:10px; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); margin-bottom:10px; }
.note-quick-actions { display:flex; gap:8px; flex-wrap:wrap; margin:8px 0 10px; }
.note-insights { display:flex; justify-content:space-between; gap:8px; flex-wrap:wrap; margin-top:8px; font-size:11px; color:var(--lux-text-sub); }
.tiny-helper { font-size: 10px; color: var(--lux-text-sub); margin-top: 4px; }
.pill-row { display:flex; gap:6px; flex-wrap:wrap; margin-top:6px; }
.pill { display:inline-flex; align-items:center; gap:4px; padding:3px 8px; border-radius:999px; font-size:10px; font-weight:700; background:var(--lux-card); border:1px solid var(--lux-border); color:var(--lux-text-sub); }
.attachment-list { display:grid; gap:6px; margin-top:10px; }
.attachment-item { display:flex; align-items:center; justify-content:space-between; gap:8px; border:1px solid var(--lux-border); background:var(--lux-card); border-radius:8px; padding:8px 10px; font-size:11px; }
.attachment-link { color: var(--titan-primary); text-decoration: none; font-weight:600; }

/* LINKS */
.link-item {
  display: flex; align-items: center; gap: 12px; padding: 14px 16px;
  border: 1px solid var(--lux-border); border-radius: 10px; background: var(--lux-hover);
  text-decoration: none; color: var(--lux-text-main); transition: all 0.2s; margin-bottom: 8px;
}
.link-item:hover { box-shadow: 0 4px 12px rgba(0,0,0,0.06); transform: translateX(4px); }
.link-icon { display: inline-flex; width: 20px; height: 20px; flex-shrink: 0; color: var(--lux-text-sub); }
.link-info { flex: 1; }
.link-name { font-size: 14px; font-weight: 600; }
.link-url { font-size: 11px; color: var(--lux-text-sub); }
.link-arrow { color: var(--lux-text-sub); font-size: 14px; }
.link-category-block { margin-bottom: 16px; }
.link-category-header { font-size:11px; font-weight:700; letter-spacing:0.8px; text-transform:uppercase; color:var(--lux-text-sub); margin:0 0 8px 2px; }
.link-item.dragging { opacity: 0.5; border-style: dashed; }
.link-favicon { width:20px; height:20px; border-radius:5px; border:1px solid var(--lux-border); background:var(--lux-card); }

/* SETTINGS PANEL */
.settings-panel {
  position: fixed; right: 0; top: 0; bottom: 0; width: 360px;
  background: var(--lux-card); box-shadow: -4px 0 20px rgba(0,0,0,0.15);
  z-index: 1001; transform: translateX(100%); transition: transform 0.3s ease; overflow-y: auto;
}
.settings-panel.open { transform: translateX(0); }
.settings-header { display: flex; justify-content: space-between; align-items: center; padding: 20px; border-bottom: 1px solid var(--lux-border); }
.settings-title { font-size: 16px; font-weight: 700; color: var(--lux-text-main); }
.settings-close { background: none; border: none; font-size: 24px; cursor: pointer; color: var(--lux-text-sub); }
.settings-content { padding: 20px; }
.settings-group { margin-bottom: 24px; }
.settings-group h3 { margin: 0 0 12px 0; font-size: 13px; text-transform: uppercase; font-weight: 700; letter-spacing: 1px; color: var(--lux-text-sub); }
.color-swatch {
  width: 100%; height: 60px; border-radius: 8px; border: 2px solid var(--lux-border);
  cursor: pointer; display: flex; align-items: center; justify-content: center;
  transition: all 0.2s; font-size: 11px; font-weight: 600; color: white;
  text-shadow: 0 1px 3px rgba(0,0,0,0.3); margin-bottom: 8px;
}
.color-swatch:hover { transform: translateY(-2px); box-shadow: 0 8px 16px rgba(0,0,0,0.15); }
.color-swatch.active { border: 3px solid var(--lux-text-main); box-shadow: 0 0 20px rgba(0,0,0,0.2); }

/* MOBILE */
.hamburger-btn {
  display: none;
  background: linear-gradient(135deg, rgba(255,255,255,0.15), rgba(255,255,255,0.08));
  border: 1px solid rgba(255,255,255,0.2); width: 44px; height: 44px; border-radius: 10px;
  cursor: pointer; align-items: center; justify-content: center; color: var(--titan-accent);
}
.mobile-sidebar-backdrop {
  display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0;
  background: rgba(0,0,0,0.5); z-index: 149; opacity: 0; transition: opacity 0.3s ease; pointer-events: none;
}
.mobile-sidebar-backdrop.active { opacity: 1; pointer-events: auto; }

.mobile-nav {
  display: none; position: fixed; bottom: 0; left: 0; right: 0;
  background: rgba(255, 255, 255, 0.98); border-top: 1px solid #cbd5e1;
  padding: 10px 0; z-index: 99; justify-content: space-around; box-shadow: 0 -4px 12px rgba(0,0,0,0.1);
}
.mobile-nav button { background: none; border: none; cursor: pointer; display: flex; flex-direction: column; align-items: center; gap: 3px; color: #1e293b; font-size: 9px; font-weight: 700; }
body.dark-mode .mobile-nav { background: rgba(15, 23, 42, 0.98); border-top-color: #475569; }
body.dark-mode .mobile-nav button { color: #e2e8f0; }

.empty-msg { padding: 40px 20px; text-align: center; color: var(--lux-text-sub); font-size: 13px; }

/* CONFIRM DIALOG */
.confirm-overlay {
  position: fixed; top: 0; left: 0; right: 0; bottom: 0;
  background: rgba(0,0,0,0.45); z-index: 2000; display: flex;
  align-items: center; justify-content: center; opacity: 0;
  transition: opacity 0.2s ease; pointer-events: none;
}
.confirm-overlay.active { opacity: 1; pointer-events: auto; }
.confirm-box {
  background: var(--lux-card); border-radius: 14px; padding: 28px 24px 20px;
  max-width: 360px; width: 90%; box-shadow: 0 20px 60px rgba(0,0,0,0.3);
  border: 1px solid var(--lux-border); transform: scale(0.95);
  transition: transform 0.2s ease;
}
.confirm-overlay.active .confirm-box { transform: scale(1); }
.confirm-icon { font-size: 32px; text-align: center; margin-bottom: 12px; }
.confirm-title { font-size: 16px; font-weight: 700; color: var(--lux-text-main); text-align: center; margin-bottom: 6px; }
.confirm-msg { font-size: 13px; color: var(--lux-text-sub); text-align: center; line-height: 1.5; margin-bottom: 20px; }
.confirm-actions { display: flex; gap: 8px; justify-content: center; }
.confirm-cancel {
  padding: 10px 20px; border-radius: 8px; font-size: 13px; font-weight: 600;
  cursor: pointer; border: 1px solid var(--lux-border); background: var(--lux-hover);
  color: var(--lux-text-main); font-family: inherit; transition: all 0.2s;
}
.confirm-cancel:hover { background: var(--lux-border); }
.confirm-delete {
  padding: 10px 20px; border-radius: 8px; font-size: 13px; font-weight: 600;
  cursor: pointer; border: none; background: var(--lux-danger); color: white;
  font-family: inherit; transition: all 0.2s;
}
.confirm-delete:hover { opacity: 0.85; }

.sidebar-btn,
.ghost-btn,
.primary-btn,
.danger-btn,
.edit-btn,
.header-btn,
.mobile-nav button,
.confirm-cancel,
.confirm-delete,
.pro-input,
.pro-select,
.habit-check,
.hamburger-btn {
  min-height: 44px;
}

@media (max-width: 768px) {
  .main-wrapper { display: block; overflow: auto; min-height: 100vh; }
  .sidebar { position: fixed; top: 0; left: 0; bottom: 0; z-index: 150; transform: translateX(-100%); transition: transform 0.3s ease; display: flex; flex-direction: column; width: min(84vw, 320px); }
  .sidebar.mobile-open { transform: translateX(0); }
  .hamburger-btn { display: flex; }
  .mobile-sidebar-backdrop { display: block; }
  .app-container {
    padding: 14px;
    background: rgba(255, 255, 255, 0.97);
  }
  body.dark-mode .app-container { background: rgba(8, 12, 26, 0.94); }
  .mobile-nav { display: flex; }
  .appShell { padding-bottom: 88px; }
  .app-header {
    padding: 12px 14px; position: sticky; top: 0; z-index: 120; border-top: none;
    background:
      linear-gradient(120deg, rgba(2, 6, 23, 0.94) 0%, rgba(15, 23, 42, 0.9) 55%, rgba(15, 34, 56, 0.86) 100%),
      linear-gradient(120deg, #040712 0%, #0f172a 45%, #0f2238 100%);
    flex-wrap: wrap;
    gap: 10px;
  }
  .header-left { width: 100%; }
  .header-title { font-size: 18px; letter-spacing: 1.2px; }
  .header-eyebrow, .header-subtitle, .header-status-pill { display: none; }
  .mobile-header-subtitle { display: block; }
  .header-logo { width: 48px; height: 48px; }
  .header-actions {
    width: 100%;
    gap: 8px;
    display: grid;
    grid-template-columns: minmax(0, 1fr) auto auto;
  }
  .global-search { width: 100%; }
  .header-btn { width: 46px; height: 46px; border-radius: 14px; }
  .install-btn { min-width: 0; width: auto; padding: 0 10px; font-size: 11px; }
  .dashboard-container { padding: 18px; gap: 22px; }
  .dashboard-header { grid-template-columns: 1fr; gap: 24px; }
  .dashboard-logo { width: 104px; height: 104px; }
  .dashboard-title-section h1 { font-size: 36px; }
  .dashboard-info-cards { grid-template-columns: 1fr; }
  .navigation-assist {
    display: none;
  }
  #taskSearch,
  #notesSearch {
    margin-left: 0 !important;
    margin-top: 10px;
    width: 100% !important;
    max-width: none !important;
  }
  .card, .focus-card, .dashboard-info-card, .task-item, .link-item, .schedule-item {
    border-radius: 16px;
  }
  .card,
  .focus-card,
  .dashboard-info-card,
  .task-item,
  .note-card,
  .schedule-block,
  .link-item,
  #quoteBox {
    background: rgba(255, 255, 255, 0.98);
    border-color: #cbd5e1;
  }
  body.dark-mode .card,
  body.dark-mode .focus-card,
  body.dark-mode .dashboard-info-card,
  body.dark-mode .task-item,
  body.dark-mode .note-card,
  body.dark-mode .schedule-block,
  body.dark-mode .link-item,
  body.dark-mode #quoteBox {
    background: rgba(15, 23, 42, 0.96);
    border-color: #475569;
  }
  .card-header { padding: 14px; align-items: flex-start; gap: 10px; }
  .task-item, .link-item { padding: 14px; }
  #taskForm [style*="grid-template-columns: 1fr 1fr"],
  #taskForm [style*="grid-template-columns: 1fr 2fr"],
  #scheduleForm [style*="grid-template-columns: 1fr 2fr"],
  #scheduleForm [style*="grid-template-columns: 1fr 1fr 1fr"] {
    grid-template-columns: 1fr !important;
  }
}

@media (max-width: 900px) {
  .layout { grid-template-columns: 1fr; }
  .sidebar { display: none; }
  .sidebar.mobile-open { display: flex; }
  .appShell { padding: 12px; }
  .hamburger-btn { display: flex; }
  .cardsGrid,
  .dashboard-info-cards,
  .quick-actions-grid { grid-template-columns: 1fr; }
  .card,
  .focus-card,
  .dashboard-info-card,
  .task-item,
  .note-card,
  .schedule-block,
  .link-item,
  .quote-box {
    width: 100%;
    max-width: 100%;
  }
}

/* Tab system inside sections */
.section-tabs { display: flex; gap: 0; border-bottom: 1px solid var(--lux-border); }
.section-tab {
  padding: 12px 20px; font-size: 12px; font-weight: 600; color: var(--lux-text-sub);
  cursor: pointer; border: none; background: none; border-bottom: 2px solid transparent;
  transition: all 0.2s; font-family: inherit;
}
.section-tab:hover { color: var(--lux-text-main); }
.section-tab.active { color: var(--lux-text-main); border-bottom-color: var(--titan-primary); }
body.dark-mode .section-tab.active { border-bottom-color: var(--titan-accent); }


/* ===== Appointments Widget ===== */
.apw { display: grid; gap: 12px; }
.apw-card { border: 1px solid rgba(255,255,255,0.14); border-radius: 14px; padding: 12px; }
.apw-h { display: flex; align-items: baseline; justify-content: space-between; gap: 10px; }
.apw-title { font-weight: 800; font-size: 16px; }
.apw-sub { font-size: 12px; opacity: 0.85; }

.apw-form { display: grid; gap: 10px; }
.apw-row { display: grid; gap: 6px; }
.apw-label { font-size: 12px; opacity: 0.9; }
.apw-input, .apw-textarea {
  width: 100%;
  padding: 10px 12px;
  border-radius: 10px;
  border: 1px solid rgba(255,255,255,0.18);
  background: rgba(0,0,0,0.16);
  color: inherit;
}
.apw-textarea { min-height: 42px; resize: vertical; }

.apw-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
@media (max-width: 420px) { .apw-grid { grid-template-columns: 1fr; } }

.apw-btn {
  padding: 12px;
  border-radius: 12px;
  border: 0;
  cursor: pointer;
  font-weight: 800;
}
.apw-list { display: grid; gap: 10px; }
.apw-item {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 12px;
  border: 1px solid rgba(255,255,255,0.12);
  border-radius: 12px;
  padding: 12px;
}
.apw-left { display: grid; gap: 6px; }
.apw-item-title { font-weight: 800; }
.apw-item-meta { font-size: 12px; opacity: 0.88; }
.apw-item-notes { font-size: 12px; opacity: 0.85; }
.apw-del {
  padding: 10px 12px;
  border-radius: 10px;
  border: 0;
  cursor: pointer;
  white-space: nowrap;
}
.apw-empty { font-size: 13px; opacity: 0.8; }


.stats-row { display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 12px; padding: 16px 20px; border-bottom: 1px solid var(--lux-border); }
.stat-box { text-align: center; padding: 12px; border-radius: 8px; background: var(--lux-hover); border: 1px solid var(--lux-border); }
.stat-num { font-size: 24px; font-weight: 900; color: var(--lux-text-main); }
.stat-label { font-size: 9px; text-transform: uppercase; letter-spacing: 1px; color: var(--lux-text-sub); font-weight: 700; margin-top: 4px; }

/* LANDING PAGE + LIVE PREVIEW */
.landing-page {
  min-height: 100vh;
  padding: clamp(28px, 4.2vw, 56px) 20px 72px;
  background: #f7faff;
  color: #0f172a;
  position: relative;
}
.landing-page::before {
  content: '';
  position: fixed;
  inset: 0;
  pointer-events: none;
  background:
    radial-gradient(circle at 16% 10%, rgba(99, 138, 214, 0.1), transparent 44%),
    radial-gradient(circle at 84% 0%, rgba(148, 184, 255, 0.08), transparent 38%),
    repeating-linear-gradient(135deg, rgba(15, 23, 42, 0.018) 0 1px, transparent 1px 22px);
}
.landing-shell { max-width: 1180px; margin: 0 auto; display: grid; gap: 34px; }
.landing-hero {
  position: relative;
  display: grid;
  gap: 34px;
  align-items: center;
  grid-template-columns: minmax(0, 1fr) minmax(0, 1.05fr);
  padding: clamp(26px, 3.4vw, 44px);
  border-radius: 28px;
  border: 1px solid rgba(148, 163, 184, 0.38);
  background: rgba(255,255,255,0.94);
  box-shadow: 0 18px 44px rgba(15, 23, 42, 0.08);
  overflow: hidden;
}
.landing-hero::before {
  content: '';
  position: absolute;
  inset: 0;
  background: radial-gradient(circle at 52% 30%, rgba(15, 23, 42, 0.03), transparent 64%);
  pointer-events: none;
}
.landing-flat-shape {
  position: absolute;
  border-radius: 999px;
  pointer-events: none;
  background: #0f172a;
  opacity: 0.04;
}
.landing-flat-shape--one { width: 180px; height: 180px; right: 40px; top: 30px; }
.landing-flat-shape--two { width: 130px; height: 130px; left: 46%; bottom: 26px; }
.landing-copy { position: relative; z-index: 1; }
.landing-brand-lockup { display: inline-flex; align-items: center; gap: 12px; margin-bottom: 16px; padding: 10px 14px; border-radius: 14px; border: 1px solid rgba(30, 64, 175, 0.18); background: rgba(255,255,255,0.9); box-shadow: 0 14px 30px rgba(30, 64, 175, 0.14); }
.landing-brand-logo { width: 58px; height: 58px; object-fit: contain; filter: drop-shadow(0 10px 22px rgba(15, 23, 42, 0.24)); }
.landing-copy h1 {
  font-family: Inter, system-ui, -apple-system, sans-serif;
  font-size: clamp(2rem, 4.6vw, 4rem);
  line-height: 0.95;
  letter-spacing: -0.045em;
  font-weight: 800;
  max-width: 13ch;
}
.landing-copy p { margin-top: 14px; font-size: clamp(0.98rem, 2vw, 1.16rem); color: #334155; max-width: 50ch; }
.landing-copy p + p { margin-top: 10px; }
.landing-tagline {
  font-size: clamp(0.88rem, 1.8vw, 0.98rem);
  font-weight: 500;
  color: #475569;
  max-width: 50ch;
}
.landing-actions { display: flex; gap: 14px; margin-top: 22px; align-items: center; flex-wrap: wrap; }
.landing-enter-wrap { display: grid; gap: 6px; }
.landing-enter-btn {
  border: none;
  border-radius: 999px;
  background: linear-gradient(135deg, #0f172a, #0b1220 65%, #1e293b);
  color: #fff;
  font-size: 1rem;
  font-weight: 800;
  letter-spacing: 0.02em;
  padding: 15px 30px;
  min-height: 52px;
  cursor: pointer;
  box-shadow: 0 18px 38px rgba(15, 23, 42, 0.3);
  transition: transform 0.22s ease, box-shadow 0.22s ease, filter 0.22s ease;
}
.landing-primary-cta { min-width: 250px; text-align: center; }
.landing-enter-btn:hover,
.landing-enter-btn:focus-visible { transform: translateY(-2px); box-shadow: 0 22px 46px rgba(15, 23, 42, 0.36); filter: brightness(1.04); }
.landing-enter-btn:active { transform: translateY(0); box-shadow: 0 14px 26px rgba(15, 23, 42, 0.28); }
.landing-helper-text { font-size: 0.78rem; font-weight: 600; color: #475569; }
.landing-secondary-link {
  color: #1d4ed8;
  text-decoration: none;
  font-weight: 700;
  min-height: 44px;
  padding: 8px 4px;
  display: inline-flex;
  align-items: center;
  gap: 5px;
  transition: color 0.2s ease, transform 0.2s ease;
}
.landing-secondary-link:hover { color: #1e3a8a; transform: translateX(2px); }
.preview-frame-wrap {
  position: relative;
  background: rgba(255,255,255,0.98); border: 1px solid #d3ddea; border-radius: 24px;
  box-shadow: 0 14px 36px rgba(15, 23, 42, 0.14); padding: 16px;
  z-index: 1;
}
.preview-frame-head { display: flex; align-items: center; justify-content: space-between; padding: 2px 4px 12px; gap: 12px; flex-wrap: wrap; }
.preview-frame-title { font-size: 0.82rem; font-weight: 800; color: #0f172a; letter-spacing: 0.02em; }
.preview-frame-pill {
  border: 1px solid #bfdbfe; background: #eff6ff; color: #1d4ed8; border-radius: 999px;
  font-size: 0.72rem; font-weight: 800; padding: 6px 10px;
}
.preview-mode-controls { display: inline-flex; align-items: center; gap: 8px; flex-wrap: wrap; justify-content: flex-end; }
.preview-mode-toggle {
  border: 1px solid #cbd5e1;
  background: #ffffff;
  color: #334155;
  border-radius: 999px;
  padding: 6px 12px;
  min-height: 44px;
  min-width: 44px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: 0.72rem;
  font-weight: 700;
  cursor: pointer;
}
.preview-mode-toggle[aria-pressed="true"] {
  border-color: #1d4ed8;
  background: #eff6ff;
  color: #1e3a8a;
}
.preview-embed-wrap {
  position: relative;
  width: 100%;
  height: min(58vh, 640px);
  border: 1px solid #d7deeb;
  border-radius: 16px;
  overflow: hidden;
  background: #fff;
  transition: width 0.2s ease;
}
.preview-embed-wrap.preview-mode-mobile {
  width: min(360px, 80vw);
  margin: 0 auto;
  border-radius: 30px;
  border: 10px solid #0f172a;
  box-shadow: 0 18px 40px rgba(15, 23, 42, 0.24);
}
.preview-embed {
  width: 100%;
  height: 100%;
  border: 0;
  display: block;
  background: #fff;
}
.preview-help-text {
  margin-top: 10px;
  color: #475569;
  font-size: 0.78rem;
  font-weight: 600;
}
.landing-grid { display: grid; gap: 16px; grid-template-columns: repeat(4, minmax(0, 1fr)); }
.landing-grid, .landing-adhd, .landing-credibility, .landing-trust, .landing-momentum, .landing-progress, .landing-final-cta { content-visibility: auto; contain-intrinsic-size: 1px 700px; }

.landing-card {
  border-radius: 16px;
  padding: 18px 16px;
  border: 1px solid #e2e8f0;
  background: rgba(255,255,255,0.9);
  box-shadow: 0 10px 26px rgba(15, 23, 42, 0.08);
  transition: transform 0.22s ease, box-shadow 0.22s ease;
}
.landing-card:hover { transform: translateY(-3px); box-shadow: 0 14px 30px rgba(15, 23, 42, 0.12); }
.landing-card-icon { font-size: 1.15rem; margin-bottom: 8px; display: inline-block; }
.landing-card h3 { font-size: 0.95rem; margin-bottom: 6px; }
.landing-card p { color: #475569; font-size: 0.84rem; line-height: 1.45; }

.landing-adhd {
  border-radius: 20px;
  border: 1px solid #dbe4f1;
  background: #f8fbff;
  box-shadow: 0 14px 36px rgba(15, 23, 42, 0.06);
  padding: clamp(20px, 3vw, 34px);
}
.landing-adhd h2 {
  font-size: clamp(1.25rem, 2.2vw, 1.7rem);
  letter-spacing: -0.02em;
  text-align: center;
}
.landing-adhd-grid {
  margin-top: 18px;
  display: grid;
  gap: 12px;
  grid-template-columns: repeat(4, minmax(0, 1fr));
}
.landing-adhd-card {
  border-radius: 14px;
  border: 1px solid #d9e2f1;
  background: rgba(255,255,255,0.95);
  padding: 14px;
}
.landing-adhd-icon {
  width: 32px;
  height: 32px;
  border-radius: 8px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  background: #eaf2ff;
  color: #1d4ed8;
  margin-bottom: 9px;
}
.landing-adhd-icon svg {
  width: 18px;
  height: 18px;
  stroke: currentColor;
  fill: none;
  stroke-width: 1.8;
  stroke-linecap: round;
  stroke-linejoin: round;
}
.landing-adhd-card h3 { font-size: 0.95rem; margin-bottom: 6px; }
.landing-adhd-card p { color: #475569; font-size: 0.84rem; line-height: 1.5; }
.landing-adhd-tagline {
  margin-top: 16px;
  text-align: center;
  color: #334155;
  font-size: 0.95rem;
}
.landing-adhd-note {
  margin: 12px auto 0;
  color: #334155;
  font-size: 0.92rem;
  line-height: 1.55;
  max-width: 70ch;
  text-align: center;
}

.landing-credibility,
.landing-trust,
.landing-momentum,
.landing-progress,
.landing-final-cta {
  border-radius: 20px;
  border: 1px solid #dbe4f1;
  background: rgba(255,255,255,0.88);
  box-shadow: 0 14px 36px rgba(15, 23, 42, 0.08);
  padding: clamp(16px, 2.2vw, 26px);
}
.landing-credibility h2 { font-size: clamp(1.25rem, 2.2vw, 1.7rem); letter-spacing: -0.02em; }
.landing-credibility p { margin-top: 10px; color: #334155; max-width: 68ch; }
.landing-trust { display: grid; gap: 12px; }
.landing-trust-strip { display: flex; flex-wrap: wrap; gap: 10px; }
.landing-trust-badge { border-radius: 999px; border: 1px solid #d6e3f8; background: #f8fbff; padding: 7px 12px; font-size: 0.8rem; font-weight: 700; color: #1e3a8a; }
.landing-quote { color: #334155; font-size: 0.95rem; font-weight: 500; }
.landing-momentum h2,
.landing-progress h2,
.landing-final-cta h2 { font-size: clamp(1.6rem, 3.2vw, 2.2rem); line-height: 1.04; letter-spacing: -0.03em; }
.landing-momentum p,
.landing-progress p,
.landing-final-cta p { margin-top: 10px; color: #334155; max-width: 62ch; }
.landing-section-cta { margin-top: 18px; display: inline-flex; }
.landing-progress-grid { margin-top: 16px; display: grid; gap: 12px; grid-template-columns: repeat(3, minmax(0, 1fr)); }
.landing-progress-stat { border-radius: 14px; border: 1px solid #d9e2f1; background: #fff; padding: 14px 12px; }
.landing-progress-stat strong { display: block; font-size: 1.4rem; letter-spacing: -0.03em; }
.landing-progress-stat span { font-size: 0.82rem; color: #475569; }
.landing-final-cta { text-align: center; display: grid; place-items: center; gap: 12px; }

.demo-mode-pill {
  position: fixed; top: 16px; right: 16px; z-index: 2500;
  border: 1px solid rgba(59,130,246,0.45); background: rgba(239,246,255,0.95); color: #1d4ed8;
  padding: 7px 11px; border-radius: 999px; font-size: 11px; font-weight: 700;
  box-shadow: 0 8px 20px rgba(15,23,42,0.15);
}
@media (max-width: 1024px) {
  .landing-hero { grid-template-columns: 1fr; }
  .landing-grid { grid-template-columns: repeat(2, minmax(0, 1fr)); }
  .landing-adhd-grid { grid-template-columns: repeat(3, minmax(0, 1fr)); }
  .landing-progress-grid { grid-template-columns: repeat(2, minmax(0, 1fr)); }
}

@media (max-width: 768px) {
  .landing-page { padding: 14px 12px 36px; min-height: auto; }
  .landing-shell { gap: 18px; }
  .landing-hero { border-radius: 20px; padding: 14px; gap: 16px; }
  .landing-copy h1 { max-width: 100%; }
  .landing-actions { margin-top: 16px; align-items: flex-start; }
  .landing-enter-btn,
  .landing-primary-cta,
  .landing-section-cta { width: 100%; }
  .landing-section-cta { justify-content: center; }
  .landing-grid,
  .landing-progress-grid { grid-template-columns: 1fr; }
  .landing-adhd-grid { grid-template-columns: repeat(2, minmax(0, 1fr)); }
  .preview-embed-wrap { height: 62vh; min-height: 420px; }
}

@media (max-width: 520px) {
  .landing-adhd-grid { grid-template-columns: 1fr; }
}

@media (prefers-reduced-motion: reduce) {
  html:focus-within { scroll-behavior: auto; }
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

  </style>
</head>
<body style="margin: 0; padding: 0;">
  <main id="landingRoot" class="landing-page">
    <div class="landing-shell">
      <section class="landing-hero">
        <span class="landing-flat-shape landing-flat-shape--one" aria-hidden="true"></span>
        <span class="landing-flat-shape landing-flat-shape--two" aria-hidden="true"></span>
        <div class="landing-copy">
          <div class="landing-brand-lockup">
            <img class="landing-brand-logo" src="assets/main-logo.svg" alt="FocusFlex logo" width="58" height="58" fetchpriority="high" decoding="async">
          </div>
          <h1>A digital agenda built by a special-education teacher for ADHD studentsâ€”and adaptable to every learner.</h1>
          <p>Keep every class, assignment and activity organised with personalised schedules and reminders.</p>
          <p class="landing-tagline">Empowering students with ADHD and all learners to thrive through structure, clarity and customised planning.</p>
          <div class="landing-actions">
            <div class="landing-enter-wrap">
              <button class="landing-enter-btn landing-primary-cta" type="button" onclick="enterApp()">Start Free Student Agenda</button>
              <span class="landing-helper-text">Free for students â€¢ No account required â€¢ Start instantly</span>
            </div>
            <a class="landing-secondary-link" href="#preview" onclick="scrollToPreview(event)">See How It Works <span aria-hidden="true">â†’</span></a>
          </div>
        </div>
        <div id="preview" class="preview-frame-wrap">
          <div class="preview-frame-head">
            <span class="preview-frame-title">Preview the experience</span>
            <div class="preview-mode-controls" role="group" aria-label="Choose landing preview mode">
              <button id="desktopPreviewModeBtn" class="preview-mode-toggle" type="button" aria-pressed="true">Desktop</button>
              <button id="mobilePreviewModeBtn" class="preview-mode-toggle" type="button" aria-pressed="false">Mobile</button>
              <span id="previewModePill" class="preview-frame-pill">Desktop Preview</span>
            </div>
          </div>
          <div id="previewEmbedWrap" class="preview-embed-wrap">
            <iframe id="previewEmbed" class="preview-embed" title="Interactive FocusFlex app preview" loading="lazy" referrerpolicy="no-referrer" src="about:blank"></iframe>
          </div>
          <p class="preview-help-text">Interactive preview: open menus, switch sections, and test core flows safely in demo mode.</p>
        </div>
      </section>

      <section class="landing-grid" aria-label="Feature highlights">
        <article class="landing-card"><span class="landing-card-icon" aria-hidden="true">ðŸ—“ï¸</span><h3>Assignment & deadline tracking</h3><p>Stay on top of due dates with clear priorities for every class.</p></article>
        <article class="landing-card"><span class="landing-card-icon" aria-hidden="true">ðŸ“</span><h3>Notes and study organization</h3><p>Keep notes, review plans, and study sessions organized in one place.</p></article>
        <article class="landing-card"><span class="landing-card-icon" aria-hidden="true">ðŸ…</span><h3>Performance hub for student athletes</h3><p>Balance school and training with routines that hold up all season.</p></article>
        <article class="landing-card"><span class="landing-card-icon" aria-hidden="true">ðŸ“ˆ</span><h3>Progress tracking & habit momentum</h3><p>Build consistency with streaks and progress you can see week to week.</p></article>
      </section>

      <section class="landing-adhd" aria-labelledby="landingAdhdTitle">
        <h2 id="landingAdhdTitle">Built for ADHD â€“ Flexible for Everyone.</h2>
        <div class="landing-adhd-grid">
          <article class="landing-adhd-card">
            <span class="landing-adhd-icon" aria-hidden="true">
              <svg viewBox="0 0 24 24"><path d="M8 3v3m8-3v3M4 10h16"/><rect x="4" y="5" width="16" height="16" rx="2"/><rect x="7" y="13" width="3" height="3"/><rect x="11" y="13" width="3" height="3"/><rect x="15" y="13" width="3" height="3"/></svg>
            </span>
            <h3>Colour-coded schedules</h3>
            <p>Colour coding makes each class block instantly visible, improving time perception and reducing time-blindness through clear visual anchors.</p>
          </article>
          <article class="landing-adhd-card">
            <span class="landing-adhd-icon" aria-hidden="true">
              <svg viewBox="0 0 24 24"><path d="M4 20h16M7 16V9m5 7V4m5 12v-5"/></svg>
            </span>
            <h3>Progress bars and streak trackers</h3>
            <p>Celebrating effort and small wins keeps motivation steady, helping students see momentum even when tasks are completed step by step.</p>
          </article>
          <article class="landing-adhd-card">
            <span class="landing-adhd-icon" aria-hidden="true">
              <svg viewBox="0 0 24 24"><path d="M15 17H5a2 2 0 0 1-2-2c0-2 2-3 2-6a7 7 0 0 1 14 0c0 3 2 4 2 6a2 2 0 0 1-2 2h-1"/><path d="M9 21a3 3 0 0 0 6 0"/></svg>
            </span>
            <h3>Flexible reminders and gentle nudges</h3>
            <p>FocusFlex uses gentle, customisable prompts that support routines without the stress of rigid timers or harsh deadline alarms.</p>
          </article>
          <article class="landing-adhd-card">
            <span class="landing-adhd-icon" aria-hidden="true">
              <svg viewBox="0 0 24 24"><path d="M20 15.5A8.5 8.5 0 1 1 8.5 4 7 7 0 1 0 20 15.5Z"/><path d="M4 20h6m-6-3h10"/></svg>
            </span>
            <h3>Focus mode, dark mode &amp; adjustable fonts</h3>
            <p>Students can switch to dark mode and tune font sizes for sensory comfort, making long study sessions easier to sustain.</p>
          </article>
          <article class="landing-adhd-card">
            <span class="landing-adhd-icon" aria-hidden="true">
              <svg viewBox="0 0 24 24"><path d="m9 11 2 2 4-4"/><path d="M5 6h14M5 12h3m8 0h3M5 18h14"/><rect x="3" y="3" width="18" height="18" rx="2"/></svg>
            </span>
            <h3>Task prioritisation &amp; step-by-step flows</h3>
            <p>Break larger goals into one actionable step at a time, then reorder tasks by priority so attention stays on what matters most.</p>
          </article>
        </div>
        <p class="landing-adhd-tagline"><strong>Your schedule, your way.</strong> Customise your dashboard around class rotations, extracurriculars, study blocks, and rest periods.</p>
        <p class="landing-adhd-note">The interface follows research-informed ADHD design guidelines with minimal distractions, strong contrast, and progressive disclosure. It is evidence-based, built by a special-education teacher for ADHD students, and flexible for every learner.</p>
      </section>

      <section class="landing-credibility" aria-label="Credibility">
        <h2>Created by a Special Education Teacher for Students with ADHD</h2>
        <p>FocusFlex was built from real classroom experience supporting students with ADHD and executive-function challenges in building consistent academic habits without stigma.</p>
      </section>

      <section class="landing-trust" aria-label="Trust and social proof">
        <div class="landing-trust-strip">
          <span class="landing-trust-badge">Used by student athletes</span>
          <span class="landing-trust-badge">Built for high school programs</span>
          <span class="landing-trust-badge">Built with ADHD students in mind</span>
        </div>
        <p class="landing-quote">â€œThis is the first planner our team actually uses every day.â€</p>
      </section>

      <section class="landing-momentum" aria-label="Motivation">
        <h2>Train your mind like an athlete. Build winning habits every school day.</h2>
        <p>Stay ahead of deadlines, recover focus quickly, and keep momentum from first period to final rep.</p>
        <button class="landing-enter-btn landing-primary-cta landing-section-cta" type="button" onclick="enterApp()">Launch the Agenda</button>
      </section>

      <section class="landing-progress" aria-label="Progress examples">
        <h2>Track momentum, not just tasks.</h2>
        <p>See your consistency, protect your routines, and keep daily habits moving forward.</p>
        <div class="landing-progress-grid">
          <div class="landing-progress-stat"><strong>87%</strong><span>Weekly completion rate</span></div>
          <div class="landing-progress-stat"><strong>14 day</strong><span>Current study streak</span></div>
          <div class="landing-progress-stat"><strong>+22%</strong><span>Focus sessions this month</span></div>
        </div>
      </section>

      <section class="landing-final-cta" aria-label="Final call to action">
        <h2>Ready to take control of your school day?</h2>
        <p>Launch your free student agenda in seconds and stay on top of every class.</p>
        <button class="landing-enter-btn landing-primary-cta" type="button" onclick="enterApp()">Start Free Student Agenda</button>
      </section>
    </div>
  </main>

  <div id="appRoot" style="display:none;">
  <div id="appBg"></div>
  <div class="appShell">
  <div class="main-wrapper layout">
    <!-- SIDEBAR -->
    <div class="sidebar" id="mobileSidebar">
      <div class="sidebar-header">
        <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px;">
          <img class="sidebar-logo-img" src="assets/main-logo.svg" alt="FocusFlex" width="32" height="32" loading="lazy" decoding="async" style="height: 32px; width: 32px; object-fit: contain;">
          <div class="sidebar-title" style="margin: 0;">FocusFlex</div>
        </div>
        <div class="sidebar-subtitle brand-subtitle">2025-2026 Digital Agenda</div>
      </div>
      <div class="sidebar-section">
        <div class="sidebar-section-title">Navigation</div>
        <button class="sidebar-btn active" data-section="profile" title="Dashboard overview and quick actions" aria-label="Open Dashboard" onclick="switchSection('profile')"><span class="ui-icon" aria-hidden="true"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M3 11.5L12 4l9 7.5"/><path d="M5 10.5V20h14v-9.5"/></svg></span>Dashboard<span class="sidebar-feature-desc">Start here for todayâ€™s priorities</span></button>
        <button class="sidebar-btn" data-section="agenda" title="Homework logging in simple steps" aria-label="Open Log Homework" onclick="switchSection('agenda')"><span class="ui-icon" aria-hidden="true"><svg viewBox="0 0 24 24" aria-hidden="true"><rect x="4" y="4" width="16" height="16" rx="3"/><path d="M8 12.5l2.5 2.5L16 9.5"/></svg></span>Log Homework<span class="sidebar-feature-desc">Capture tasks quickly with defaults</span></button>
        <button class="sidebar-btn" data-section="schedule" title="Day cycle and class periods" aria-label="Open Schedule" onclick="switchSection('schedule')"><span class="ui-icon" aria-hidden="true"><svg viewBox="0 0 24 24" aria-hidden="true"><rect x="3" y="5" width="18" height="16" rx="3"/><path d="M8 3v4M16 3v4M3 10h18"/></svg></span>Schedule<span class="sidebar-feature-desc">Manage Day A/B/C class cycles</span></button>
        <button class="sidebar-btn" data-section="appointments" title="Appointments and events" aria-label="Open Appointments" onclick="switchSection('appointments')"><span class="ui-icon" aria-hidden="true"><svg viewBox="0 0 24 24" aria-hidden="true"><rect x="3" y="4" width="18" height="17" rx="3"/><path d="M8 2v4M16 2v4M3 10h18"/><path d="M8 14h3M8 17h5"/></svg></span>Appointments<span class="sidebar-feature-desc">Track upcoming events and visits</span></button>
        <button class="sidebar-btn" data-section="heatmap" title="Analytics and Focus Studio insights" aria-label="Open Analytics" onclick="switchSection('heatmap')"><span class="ui-icon" aria-hidden="true"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M4 19h16"/><path d="M7 15l3-3 3 2 4-5"/><circle cx="7" cy="15" r="1"/><circle cx="10" cy="12" r="1"/><circle cx="13" cy="14" r="1"/><circle cx="17" cy="9" r="1"/></svg></span>Analytics<span class="sidebar-feature-desc">Track completion and focus trends</span></button>
        <button class="sidebar-btn" data-section="notes" title="Notes and linked class context" aria-label="Open Notes" onclick="switchSection('notes')"><span class="ui-icon" aria-hidden="true"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M6 3h9l5 5v13H6z"/><path d="M15 3v5h5"/><path d="M9 13h6M9 17h6"/></svg></span>Notes<span class="sidebar-feature-desc">Capture study notes and attachments</span></button>
        <button class="sidebar-btn" data-section="links" title="Frequently used school links" aria-label="Open Quick Links" onclick="switchSection('links')"><span class="ui-icon" aria-hidden="true"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M10 14l-1.5 1.5a3.5 3.5 0 01-5-5L7 7a3.5 3.5 0 015 5L10.5 13"/><path d="M14 10l1.5-1.5a3.5 3.5 0 015 5L17 17a3.5 3.5 0 01-5-5l1.5-1.5"/></svg></span>Links<span class="sidebar-feature-desc">One tap access to school tools</span></button>
      </div>
      <div class="sidebar-section">
        <div class="sidebar-section-title">Appearance</div>
        <button class="sidebar-btn" onclick="toggleSettingsPanel()"><span class="ui-icon" aria-hidden="true"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 3l1 2.3 2.5.7 2-1.5 2 3.4-1.8 1.7.3 2.6 2.2 1.5-2 3.4-2.4-.9-2.2 1.5-.4 2.5h-4l-.4-2.5-2.2-1.5-2.4.9-2-3.4 2.2-1.5.3-2.6L2.5 7.9l2-3.4 2 1.5 2.5-.7z"/><circle cx="12" cy="12" r="3"/></svg></span>Customize App</button><div id="customizeFirstTip" class="first-time-tip" style="display:none;">Tip: personalize themes, branding, and readability in Customize App.</div>
      </div>
      <div class="sidebar-section">
        <div class="sidebar-about">
          <div class="sidebar-about-title">FocusFlex</div>
          <div class="sidebar-about-text">Manage your tasks, notes, and schedule all in one place.</div>
          <div class="sidebar-policy" aria-label="Privacy and data policy notice">
            <strong>Privacy &amp; Data Notice</strong>
            <p>Your agenda data is stored on this device in browser local storage by default, not on a cloud server.</p>
            <p>Data remains available until you delete entries, clear site data, or use Reset to defaults from this sidebar.</p>
            <p>You control your data at all times. If cloud sync is enabled in a future release, account access will use secure OAuth sign-in and synced data will be encrypted in transit and at rest.</p>
          </div>
          <button id="resetSettingsBtn" class="sidebar-reset-btn">Reset to defaults</button>
        </div>
      </div>
    </div>

    <!-- MAIN CONTENT -->
<div class="main-content">
  <div class="app-header">
    <div class="header-left">
      <img class="header-logo" src="assets/main-logo.svg" alt="FocusFlex" width="176" height="52" fetchpriority="high" decoding="async">
      <div class="header-brand">
        <div class="header-title">FocusFlex</div>
        <div class="header-subtitle">Plan smarter every day</div>
        <div class="mobile-header-subtitle">Plan Smarter Everyday</div>
      </div>
    </div>
    <div class="header-actions">
      <label for="globalSearch" class="sr-only" style="position:absolute;left:-9999px;">Search notes and tasks</label>
      <input id="globalSearch" class="pro-input global-search panel-focus-ring" type="search" placeholder="Search notes + tasks" aria-label="Search notes and tasks" />
      <div class="header-status-pill"><span class="status-dot"></span>Synced & Ready</div>
      <button class="hamburger-btn" id="hamburgerBtn" aria-label="Open menu" aria-controls="mobileSidebar" aria-expanded="false" onclick="toggleMobileSidebar()"><span class="ui-icon icon-lg" aria-hidden="true"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M4 7h16M4 12h16M4 17h16"/></svg></span></button>
      <button class="header-btn install-btn" id="installBtn" style="display:none;" aria-hidden="true">Install App</button>
      <button class="header-btn" id="settingsToggle" aria-label="Open settings" aria-haspopup="dialog" aria-controls="settingsPanel" aria-expanded="false"><span class="ui-icon" aria-hidden="true"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 3l1 2.3 2.5.7 2-1.5 2 3.4-1.8 1.7.3 2.6 2.2 1.5-2 3.4-2.4-.9-2.2 1.5-.4 2.5h-4l-.4-2.5-2.2-1.5-2.4.9-2-3.4 2.2-1.5.3-2.6L2.5 7.9l2-3.4 2 1.5 2.5-.7z"/><circle cx="12" cy="12" r="3"/></svg></span></button>
    </div>
  </div>

  <div class="app-container">
    <div class="bento-grid">
      <div class="navigation-assist" aria-label="Page navigation aids">
        <div class="breadcrumb-wrap" aria-live="polite">
          <span class="breadcrumb-label">You are here</span>
          <span aria-hidden="true">/</span>
          <span id="breadcrumbCurrent" class="breadcrumb-current">Dashboard</span>
        </div>
        <button id="pageBackBtn" class="ghost-btn back-btn panel-focus-ring" aria-label="Go back to previous section">â† Back</button>
      </div>

      <!-- ========== DASHBOARD ========== -->
      <div id="section-profile" class="card section-wrapper active">
        <div class="dashboard-container">
          <div class="dashboard-header">
            <div class="dashboard-left">
              <div class="dashboard-logo"><img id="dashboardLogoImg" src="assets/main-logo.svg" alt="FocusFlex" width="105" height="105" loading="lazy" decoding="async"></div>
              <div class="dashboard-title-section">
                <h2>Performance Hub</h2>
                <h1 class="brand-app-name">My Agenda</h1>
                <p class="brand-tagline">Elite Athlete Dashboard</p>
              </div>
            </div>
            <div class="dashboard-info-cards">
              <div class="dashboard-info-card light">
                <div class="dashboard-info-label">Today</div>
                <div id="dateDisplay" class="dashboard-info-value">...</div>
              </div>
              <div class="dashboard-info-card dark">
                <div class="dashboard-info-label">Summer Break</div>
                <div id="schoolCountdown" class="dashboard-info-value">...</div>
              </div>
              <div class="dashboard-info-card light">
                <div class="dashboard-info-label">Tasks Open</div>
                <div id="dashOpenTasks" class="dashboard-info-value">0</div>
              </div>
              <div class="dashboard-info-card dark">
                <div class="dashboard-info-label">Completed</div>
                <div id="dashCompletedTasks" class="dashboard-info-value">0</div>
              </div>
            </div>
          </div>
          <!-- Due This Week -->
          <div class="dashboard-section">
            <div class="dashboard-section-header">
              <div class="dashboard-section-label">Due This Week</div>
              <button class="ghost-btn" style="padding: 6px 12px; font-size: 11px;" onclick="switchSection('agenda')">View All â†’</button>
            </div>
            <div id="dueThisWeek"></div>
          </div>

          <!-- Inspirational Quote -->
          <div class="dashboard-section">
            <div class="dashboard-section-label">Daily Inspiration</div>
            <div id="quoteBox" class="quote-box">
              <div id="quoteText" class="quote-text"></div>
              <div id="quoteAuthor" class="quote-author"></div>
              <button onclick="nextQuote()" class="quote-refresh-btn" title="New quote" aria-label="Load another inspirational quote">â†»</button>
            </div>
          </div>

          <!-- Quick Actions -->
          <div class="dashboard-section">
            <div class="dashboard-section-label">Quick Actions</div>
            <div class="quick-actions-grid">
              <button onclick="switchSection('agenda'); setTimeout(toggleTaskForm, 200);" class="quick-action-btn primary">
                <span class="ui-icon icon-xl" aria-hidden="true"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M4 20l4.5-1L19 8.5 15.5 5 5 15.5z"/><path d="M13.5 6.5l3 3"/></svg></span>
                <div><strong>Log Homework</strong><span>Add a new task</span></div>
              </button>
              <button onclick="switchSection('schedule')" class="quick-action-btn secondary">
                <span class="ui-icon icon-xl" aria-hidden="true"><svg viewBox="0 0 24 24" aria-hidden="true"><rect x="3" y="5" width="18" height="16" rx="3"/><path d="M8 3v4M16 3v4M3 10h18"/></svg></span>
                <div><strong>View Schedule</strong><span>Check your classes</span></div>
              </button>
              <button onclick="switchSection('notes'); setTimeout(newNote, 200);" class="quick-action-btn secondary">
                <span class="ui-icon icon-xl" aria-hidden="true"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M6 3h9l5 5v13H6z"/><path d="M15 3v5h5"/><path d="M9 13h6M9 17h6"/></svg></span>
                <div><strong>New Note</strong><span>Jot something down</span></div>
              </button>
              <button onclick="switchSection('links')" class="quick-action-btn secondary">
                <span class="ui-icon icon-xl" aria-hidden="true"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M10 14l-1.5 1.5a3.5 3.5 0 01-5-5L7 7a3.5 3.5 0 015 5L10.5 13"/><path d="M14 10l1.5-1.5a3.5 3.5 0 015 5L17 17a3.5 3.5 0 01-5-5l1.5-1.5"/></svg></span>
                <div><strong>Quick Links</strong><span>Open your sites</span></div>
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- ========== HOMEWORK / TASKS ========== -->
      <div id="section-agenda" class="card section-wrapper">
        <div class="feature-tip" role="note">Homework logging is now a 3-step flow to reduce form overload.</div>
        <div class="card-header">
          <div class="card-title"><span class="ui-icon" aria-hidden="true"><svg viewBox="0 0 24 24" aria-hidden="true"><rect x="4" y="4" width="16" height="16" rx="3"/><path d="M8 12.5l2.5 2.5L16 9.5"/></svg></span>Log Homework</div>
          <button class="ghost-btn" onclick="toggleTaskForm()">+ Add Task</button>
        </div>

        <!-- Add Task Form -->
        <div id="taskForm" style="display:none; padding: 20px; border-bottom: 1px solid var(--lux-border); background: var(--lux-hover);">
          <div style="display: grid; gap: 10px;">
            <div style="font-size: 13px; font-weight: 700; color: var(--lux-text-main); margin-bottom: 2px;" id="taskFormTitle">Add Task</div>
            <div class="task-stepper" aria-label="Homework form progress">
              <span class="task-step-dot active" data-task-step="1">1. Assignment</span>
              <span class="task-step-dot" data-task-step="2">2. Class + due dates</span>
              <span class="task-step-dot" data-task-step="3">3. Priority + notes</span>
            </div>
            <div class="task-step-pane active" data-task-pane="1">
              <div style="display:flex; gap:8px; align-items:end;">
                <div class="form-field" style="flex:1;">
                  <label class="form-label" for="taskNaturalInput">Quick add from sentence</label>
                  <input id="taskNaturalInput" class="pro-input" placeholder="Try: Math worksheet due Friday" aria-label="Quick add task from natural language" />
                </div>
                <button class="ghost-btn" onclick="parseNaturalTaskInput()" aria-label="Parse quick add sentence">Parse</button>
              </div>
              <div class="form-field">
                <label class="form-label" for="taskTitle">Assignment title</label>
                <input id="taskTitle" class="pro-input" placeholder="Example: Finish chapter 3 questions" aria-label="Assignment title" />
              </div>
              <div class="quick-subject-row" aria-label="Quick subject buttons">
                <button type="button" class="quick-subject-btn" onclick="setTaskSubject('Math')">Math</button>
                <button type="button" class="quick-subject-btn" onclick="setTaskSubject('English')">English</button>
                <button type="button" class="quick-subject-btn" onclick="setTaskSubject('Science')">Science</button>
                <button type="button" class="quick-subject-btn" onclick="setTaskSubject('History')">History</button>
              </div>
              <div style="display:flex; gap: 8px;">
                <button class="primary-btn" onclick="setTaskStep(2)">Next</button>
                <button class="ghost-btn" onclick="toggleTaskForm()" aria-label="Cancel adding task">Cancel</button>
              </div>
            </div>
            <div class="task-step-pane" data-task-pane="2">
              <div class="form-field">
                <label class="form-label" for="taskSubject">Subject</label>
                <select id="taskSubject" class="pro-select pro-input" aria-label="Select subject">
                  <option value="">Subject (example: Math)</option>
                  <option>Math</option><option>English</option><option>Science</option>
                  <option>History</option><option>Spanish</option><option>Art</option>
                  <option>PE</option><option>Music</option><option>Tech</option><option>Other</option>
                </select>
              </div>
              <div class="form-field">
                <label class="form-label" for="homeworkDue">Homework due date</label>
                <input id="homeworkDue" type="date" class="pro-input" aria-label="Homework due date" required />
              </div>
              <div class="form-field">
                <label class="form-label" for="taskDue">Task due date</label>
                <input id="taskDue" type="date" class="pro-input" aria-label="Task due date" required />
              </div>
              <div class="form-field">
                <label class="form-label" for="taskAssignedDate">Assignment date</label>
                <input id="taskAssignedDate" type="date" class="pro-input" aria-label="Assignment date" />
              </div>
              <div style="display: flex; gap: 10px;">
                <button class="ghost-btn" onclick="setTaskStep(1)">Back</button>
                <button class="primary-btn" onclick="setTaskStep(3)">Next</button>
              </div>
            </div>
            <div class="task-step-pane" data-task-pane="3">
              <div class="form-field">
                <label class="form-label" for="taskPriority">Priority</label>
                <select id="taskPriority" class="pro-select pro-input" aria-label="Select priority level" required style="display:none;">
                  <option value="high">High</option>
                  <option value="medium" selected>Medium</option>
                  <option value="low">Low</option>
                </select>
                <div class="priority-options" role="radiogroup" aria-label="Select priority level">
                  <label class="priority-option-chip high" data-priority="high" role="radio" aria-checked="false" tabindex="0">
                    <input type="radio" name="taskPriorityChoice" value="high" />
                    <span class="priority-dot priority-high"></span>High
                  </label>
                  <label class="priority-option-chip medium selected" data-priority="medium" role="radio" aria-checked="true" tabindex="0">
                    <input type="radio" name="taskPriorityChoice" value="medium" checked />
                    <span class="priority-dot priority-medium"></span>Medium
                  </label>
                  <label class="priority-option-chip low" data-priority="low" role="radio" aria-checked="false" tabindex="0">
                    <input type="radio" name="taskPriorityChoice" value="low" />
                    <span class="priority-dot priority-low"></span>Low
                  </label>
                </div>
              </div>
              <div class="form-field">
                <label class="form-label" for="taskNotes">Notes</label>
                <input id="taskNotes" class="pro-input" placeholder="Optional details" aria-label="Task notes" />
              </div>
              <div style="display: flex; gap: 10px;">
                <button class="ghost-btn" onclick="setTaskStep(2)">Back</button>
                <button class="primary-btn" id="taskFormSaveBtn" onclick="addTask()" aria-label="Save task">Save Task</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Stats -->
        <div class="stats-row">
          <div class="stat-box"><div id="statOpen" class="stat-num">0</div><div class="stat-label">Open</div></div>
          <div class="stat-box"><div id="statDone" class="stat-num">0</div><div class="stat-label">Done</div></div>
          <div class="stat-box"><div id="statOverdue" class="stat-num" style="color:var(--lux-danger)">0</div><div class="stat-label">Overdue</div></div>
        </div>

        <!-- Filters -->
        <div class="filter-bar">
          <button class="filter-chip active" data-filter="all" onclick="filterTasks('all', this)" aria-label="Show all homework tasks">All Tasks</button>
          <button class="filter-chip" data-filter="open" onclick="filterTasks('open', this)" aria-label="Show homework tasks not completed">To Do</button>
          <button class="filter-chip" data-filter="completed" onclick="filterTasks('completed', this)" aria-label="Show completed homework tasks">Completed</button>
          <button class="filter-chip" data-filter="overdue" onclick="filterTasks('overdue', this)" aria-label="Show overdue homework tasks">Overdue</button>
          <input id="taskSearch" class="pro-input panel-focus-ring" type="search" placeholder="Search tasks" aria-label="Search tasks" style="margin-left:auto;max-width:220px;" oninput="renderTasks()" />
        </div>
        <!-- Subject Filters -->
        <div id="subjectFilters" class="filter-bar" style="padding-top:0; border-bottom: 1px solid var(--lux-border);"></div>

        <!-- Task List -->
        <div id="taskList" style="padding: 16px 20px;"></div>
      </div>

      <!-- ========== SCHEDULE ========== -->
      <div id="section-schedule" class="card section-wrapper">
        <div class="feature-tip" role="note">Day cycles repeat in order (Aâ†’Bâ†’C...). Add classes under each day tab. Start with the sample template if needed.</div>
        <div class="card-header">
          <div class="card-title"><span class="ui-icon" aria-hidden="true"><svg viewBox="0 0 24 24" aria-hidden="true"><rect x="3" y="5" width="18" height="16" rx="3"/><path d="M8 3v4M16 3v4M3 10h18"/></svg></span>Schedule</div>
          <button class="ghost-btn" onclick="toggleScheduleForm()">+ Add Period</button>
        </div>

        <div style="padding: 14px 20px; border-bottom: 1px solid var(--lux-border); display: grid; gap: 10px; background: var(--lux-hover);">
          <div style="font-size: 11px; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; color: var(--lux-text-sub);">Schedule Setup</div>
          <div style="font-size:12px;color:var(--lux-text-sub);margin-top:8px;">Day A/B/C means your class order rotates by day. Choose cycle length, then add each period under the active day tab.</div>
          <div style="display:flex;gap:8px;margin-top:10px;flex-wrap:wrap;">
            <button class="ghost-btn" type="button" onclick="applyScheduleTemplate()">Load Example Template</button>
            <button class="ghost-btn" type="button" onclick="toggleScheduleForm()">Add Class Manually</button>
          </div>
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
            <select id="scheduleDayStyle" class="pro-select" onchange="updateScheduleSettings()">
              <option value="letter">Letter days (A-E)</option>
              <option value="number">Number days (1-5)</option>
            </select>
            <select id="scheduleDayCount" class="pro-select" onchange="updateScheduleSettings()">
              <option value="2">2-day cycle</option>
              <option value="3">3-day cycle</option>
              <option value="4">4-day cycle</option>
              <option value="5">5-day cycle</option>
            </select>
          </div>
        </div>

        <div id="scheduleForm" style="display:none; padding: 20px; border-bottom: 1px solid var(--lux-border); background: var(--lux-hover);">
          <div style="display: grid; gap: 10px;">
            <div style="display: grid; grid-template-columns: 1fr 2fr; gap: 10px;">
              <input id="schedPeriod" class="pro-input" placeholder="Period #" />
              <input id="schedClass" class="pro-input" placeholder="Class name" />
            </div>
            <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px;">
              <input id="schedStart" type="time" class="pro-input" />
              <input id="schedEnd" type="time" class="pro-input" />
              <input id="schedRoom" class="pro-input" placeholder="Room" />
            </div>
            <input id="schedTeacher" class="pro-input" placeholder="Teacher name (optional)" />
            <div style="display: flex; gap: 8px;">
              <button class="primary-btn" onclick="addScheduleBlock()">Save Period</button>
              <button class="ghost-btn" onclick="toggleScheduleForm()">Cancel</button>
            </div>
          </div>
        </div>

        <!-- Schedule Day Tabs -->
        <div class="section-tabs" id="dayTabs"></div>

        <div id="scheduleList" style="padding: 16px 20px;"></div>

        <!-- PDF Upload -->
        <div style="padding: 16px 20px; border-top: 1px solid var(--lux-border);">
          <div style="font-size: 11px; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; color: var(--lux-text-sub); margin-bottom: 10px;">Upload Schedule PDF</div>
          <label style="display: flex; align-items: center; justify-content: center; padding: 24px; border: 2px dashed var(--lux-border); border-radius: 10px; cursor: pointer; transition: all 0.2s; background: var(--lux-hover);">
            <input type="file" id="schedulePDF" accept=".pdf,.png,.jpg,.jpeg" style="display:none;" onchange="handleScheduleUpload(event)" />
            <div style="text-align: center;">
              <div style="font-size: 28px; margin-bottom: 8px; color: var(--lux-text-sub);"><span class="ui-icon icon-xl" aria-hidden="true"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M6 3h9l5 5v13H6z"/><path d="M15 3v5h5"/></svg></span></div>
              <div style="font-size: 13px; font-weight: 600; color: var(--lux-text-main);">Click to upload schedule</div>
              <div style="font-size: 11px; color: var(--lux-text-sub);">PDF, PNG, JPG accepted</div>
            </div>
          </label>
          <div id="uploadedSchedules" style="margin-top: 12px;"></div>
        </div>
      </div>

      <!-- ========== ANALYTICS ========== -->
      <div id="section-heatmap" class="card section-wrapper">
        <div class="card-header">
          <div class="card-title"><span class="ui-icon" aria-hidden="true"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M4 19h16"/><path d="M7 15l3-3 3 2 4-5"/><circle cx="7" cy="15" r="1"/><circle cx="10" cy="12" r="1"/><circle cx="13" cy="14" r="1"/><circle cx="17" cy="9" r="1"/></svg></span>Analytics</div>
        </div>
        <div style="padding: 20px;">
          <div class="stats-row" style="padding: 0; border: none; margin-bottom: 20px;">
            <div class="stat-box"><div id="anTotal" class="stat-num">0</div><div class="stat-label">Total Tasks</div></div>
            <div class="stat-box"><div id="anCompleted" class="stat-num">0</div><div class="stat-label">Completed</div></div>
            <div class="stat-box"><div id="anRate" class="stat-num">0%</div><div class="stat-label">Completion</div></div>
          </div>

          <div style="font-size: 11px; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; color: var(--lux-text-sub); margin-bottom: 12px;">Tasks by Subject</div>
          <div id="subjectChart" style="margin-bottom: 24px;"></div>

          <div style="font-size: 11px; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; color: var(--lux-text-sub); margin-bottom: 12px;">7-Day Activity</div>
          <div id="weekChart" style="display: flex; gap: 4px; align-items: end; height: 100px;"></div>

          <div style="font-size: 11px; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; color: var(--lux-text-sub); margin: 18px 0 12px;">Focus Minutes (7-Day)</div>
          <div id="focusPatternChart" style="display: flex; gap: 4px; align-items: end; height: 100px; margin-bottom: 6px;"></div>

          <div style="font-size: 11px; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; color: var(--lux-text-sub); margin: 18px 0 12px;">Focus Studio</div>
          <div class="focus-grid" style="grid-template-columns: 1fr;">
            <div class="focus-card">
              <div style="display:flex;justify-content:space-between;align-items:center;gap:10px;">
                <span id="pomodoroMode" class="focus-chip">Focus Session</span>
                <div style="font-size:11px;color:var(--lux-text-sub);">Completed today: <strong id="focusToday">0</strong></div>
              </div>
              <div id="pomodoroTimer" class="focus-time">25:00</div>
              <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-bottom:10px;">
                <div>
                  <input id="focusMinutes" type="number" min="5" max="90" class="pro-input" value="25" placeholder="Focus mins" />
                  <div style="font-size:10px;color:var(--lux-text-sub);margin-top:4px;">Minutes to focus before your break starts.</div>
                </div>
                <div>
                  <input id="breakMinutes" type="number" min="1" max="30" class="pro-input" value="5" placeholder="Break mins" />
                  <div style="font-size:10px;color:var(--lux-text-sub);margin-top:4px;">Minutes to take a break before the next focus session.</div>
                </div>
              </div>
              <div style="display:flex;gap:8px;flex-wrap:wrap;">
                <button class="primary-btn" onclick="togglePomodoro()" id="pomodoroStartBtn">Start</button>
                <button class="ghost-btn" onclick="resetPomodoro()">Reset</button>
                <button class="ghost-btn" onclick="testAlarmFlow()">Test Alarm</button>
                <select id="noiseSelect" class="pro-select pro-input" style="max-width:180px;" onchange="playNoise()" onclick="playNoise()">
                  <option value="">White noise off</option>
                  <option value="rain">Rain</option>
                  <option value="brown">Brown noise</option>
                  <option value="pink">Pink noise</option>
                </select>
                <button class="ghost-btn" onclick="stopNoise()">Mute</button>
              </div>
              <div style="margin-top:12px;font-size:11px;color:var(--lux-text-sub);line-height:1.5;">If your alarm is quiet in Focus Studio: unmute this tab, click <strong>Test Alarm</strong>, then allow notifications when prompted.</div>
              <div id="focusAlarmStatus" class="focus-status">Alarm ready when you are.</div>
              <div style="margin-top:12px;font-size:11px;color:var(--lux-text-sub);">Weekly focus time: <strong id="focusMinutesWeek">0 mins</strong></div>
              <div style="font-size:11px;color:var(--lux-text-sub);">Average daily focus: <strong id="focusAvgDay">0 mins</strong></div>
            </div>
          </div>
        </div>
      </div>

      <!-- ========== APPOINTMENTS ========== -->
      <div id="section-appointments" class="card section-wrapper">
        <div class="card-header">
          <div class="card-title">Appointments</div>
          <button class="ghost-btn" onclick="toggleApptForm()">+ Add Appointment</button>
        </div>

        <div id="apptForm" style="display:none; padding: 20px; border-bottom: 1px solid var(--lux-border);">
          <div class="form-field">
            <label class="form-label" for="apptTitle">Title</label>
            <input id="apptTitle" class="pro-input" type="text" placeholder="Appointment title" />
          </div>
          <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:10px; margin-top:10px;">
            <div class="form-field">
              <label class="form-label" for="apptDate">Date</label>
              <input id="apptDate" class="pro-input" type="date" />
            </div>
            <div class="form-field">
              <label class="form-label" for="apptTime">Time</label>
              <input id="apptTime" class="pro-input" type="time" />
            </div>
          </div>
          <div class="form-field" style="margin-top:10px;">
            <label class="form-label" for="apptLocation">Location (optional)</label>
            <input id="apptLocation" class="pro-input" type="text" placeholder="Location" />
          </div>
          <div class="form-field" style="margin-top:10px;">
            <label class="form-label" for="apptNotes">Notes (optional)</label>
            <input id="apptNotes" class="pro-input" type="text" placeholder="Notes" />
          </div>
          <div style="display:flex; gap:8px; margin-top:12px;">
            <button class="primary-btn" onclick="addAppointment()">Save</button>
            <button class="ghost-btn" onclick="toggleApptForm()">Cancel</button>
          </div>
        </div>

        <div id="apptList"></div>
      </div>

      <!-- ========== NOTES ========== -->
      <div id="section-notes" class="card section-wrapper">
        <div class="card-header">
          <div class="card-title"><span class="ui-icon" aria-hidden="true"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M6 3h9l5 5v13H6z"/><path d="M15 3v5h5"/><path d="M9 13h6M9 17h6"/></svg></span>Notes</div>
          <button class="ghost-btn" onclick="newNote()">+ New Note</button>
        </div>

        <div class="note-toolbar">
          <input id="notesSearch" class="pro-input panel-focus-ring" type="search" placeholder="Search title, folder, content..." aria-label="Search notes by title folder or content" oninput="renderNotes()" />
          <select id="notesFolderFilter" class="pro-select pro-input" onchange="renderNotes()"></select>
        </div>

        <!-- Note Editor (hidden by default) -->
        <div id="noteEditor" style="display:none; padding: 20px; border-bottom: 1px solid var(--lux-border);">
          <input id="noteTitle" class="pro-input" placeholder="Note title..." style="margin-bottom: 10px; font-weight: 700;" />
          <div class="note-meta-grid">
            <input id="noteFolder" class="pro-input" placeholder="Folder (ex: Biology)" />
            <select id="noteLinkedTask" class="pro-select pro-input"></select>
            <select id="noteLinkedSchedule" class="pro-select pro-input"></select>
          </div>
          <textarea id="noteContent" class="note-editor" placeholder="Write your note..."></textarea>
          <div class="note-insights">
            <span id="noteContentStats">0 words Â· 0 chars</span>
            <span>Tip: Press Ctrl/Cmd + S to save quickly.</span>
          </div>
          <div style="margin-top:10px;">
            <label class="ghost-btn" style="display:inline-flex;align-items:center;gap:6px;cursor:pointer;">
              <input type="file" id="noteAttachmentInput" multiple style="display:none;" onchange="handleNoteAttachment(event)" />
              <span class="ui-icon" aria-hidden="true"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M7 13.5l6.8-6.8a3.5 3.5 0 115 5l-8.7 8.7a5 5 0 11-7.1-7.1L12 5"/></svg></span>
              Add Attachments
            </label>
            <div class="tiny-helper">Attachments are stored locally in your browser.</div>
            <div id="noteAttachmentList" class="attachment-list"></div>
          </div>
          <div style="display: flex; gap: 8px; margin-top: 10px;">
            <button class="primary-btn" onclick="saveNote()">Save Note</button>
            <button class="ghost-btn" onclick="cancelNote()">Cancel</button>
          </div>
        </div>

        <div id="notesList" style="padding: 16px 20px;"></div>
      </div>
      <!-- ========== LINKS ========== -->
      <div id="section-links" class="card section-wrapper">
        <div class="card-header">
          <div class="card-title"><span class="ui-icon" aria-hidden="true"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M10 14l-1.5 1.5a3.5 3.5 0 01-5-5L7 7a3.5 3.5 0 015 5L10.5 13"/><path d="M14 10l1.5-1.5a3.5 3.5 0 015 5L17 17a3.5 3.5 0 01-5-5l1.5-1.5"/></svg></span>Quick Links</div>
          <button class="ghost-btn" onclick="toggleLinkForm()">+ Add Link</button>
        </div>

        <div id="linkForm" style="display:none; padding: 20px; border-bottom: 1px solid var(--lux-border); background: var(--lux-hover);">
          <div style="display: grid; gap: 10px;">
            <input id="linkName" class="pro-input" placeholder="Link name" />
            <input id="linkUrl" class="pro-input" placeholder="https://..." />
            <select id="linkCategory" class="pro-select pro-input">
              <option value="school">School</option><option value="study">Study</option>
              <option value="communication">Communication</option><option value="productivity">Productivity</option>
              <option value="tools">Tools</option><option value="fun">Fun</option>
              <option value="other">Other</option>
            </select>
            <div style="display: flex; gap: 8px;">
              <button class="primary-btn" onclick="addLink()">Save Link</button>
              <button class="ghost-btn" onclick="toggleLinkForm()">Cancel</button>
            </div>
          </div>
        </div>

        <div class="note-toolbar" style="padding-top:10px;padding-bottom:10px;">
          <select id="linkCategoryFilter" class="pro-select pro-input" onchange="renderLinks()">
            <option value="all">All Categories</option>
            <option value="school">School</option>
            <option value="study">Study</option>
            <option value="communication">Communication</option>
            <option value="productivity">Productivity</option>
            <option value="tools">Tools</option>
            <option value="fun">Fun</option>
            <option value="other">Other</option>
          </select>
          <div class="tiny-helper" style="align-self:center;">Drag and drop links to reorder.</div>
        </div>

        <div id="linksList" style="padding: 16px 20px;"></div>
      </div>

    </div>
  </div>
</div>

<!-- SETTINGS PANEL -->
<div id="settingsPanel" class="settings-panel" role="dialog" aria-modal="true" aria-labelledby="settingsPanelTitle" aria-hidden="true" tabindex="-1">
  <div class="settings-header">
    <div class="settings-title" id="settingsPanelTitle">Appearance</div>
    <button class="settings-close panel-focus-ring" id="closeSettings" aria-label="Close appearance panel">âœ•</button>
  </div>
  <div class="settings-content">
    <div class="settings-group">
      <h3>Branding</h3>
      <div style="display:flex;flex-direction:column;gap:12px;">
        <!-- Logo Preview -->
        <div style="display:flex;align-items:center;gap:14px;">
          <div id="logoPreview" style="width:56px;height:56px;border-radius:10px;border:2px solid var(--lux-border);overflow:hidden;display:flex;align-items:center;justify-content:center;background:var(--lux-hover);flex-shrink:0;">
            <img id="logoPreviewImg" src="" alt="Dashboard logo" loading="lazy" decoding="async" style="width:80%;height:80%;object-fit:contain;" />
          </div>
          <div style="flex:1;display:grid;gap:8px;">
            <div>
              <div style="font-size:13px;font-weight:600;color:var(--lux-text-main);margin-bottom:4px;">Dashboard Main Logo</div>
              <div style="font-size:11px;color:var(--lux-text-sub);">Only the main dashboard logo can be customized. All other app branding stays locked to FocusFlex.</div>
            </div>
            <div style="display:flex;gap:8px;flex-wrap:wrap;">
              <label for="dashboardLogoUpload" class="ghost-btn" style="font-size:11px;cursor:pointer;">Upload Dashboard Logo</label>
              <input id="dashboardLogoUpload" type="file" accept="image/*" onchange="handleDashboardLogoUpload(this)" style="display:none;" />
              <button class="ghost-btn" onclick="resetDashboardLogo()" style="font-size:11px;">Reset Dashboard Logo</button>
            </div>
          </div>
        </div>
        <!-- Title -->
        <div>
          <div style="font-size:11px;font-weight:700;text-transform:uppercase;letter-spacing:0.8px;color:var(--lux-text-sub);margin-bottom:6px;">Title</div>
          <input id="brandName" class="pro-input" placeholder="My Agenda" maxlength="20" oninput="updateBrandName(this.value)" style="color:var(--titan-accent);font-weight:700;" />
        </div>
        <!-- Subtitle -->
        <div>
          <div style="font-size:11px;font-weight:700;text-transform:uppercase;letter-spacing:0.8px;color:var(--lux-text-sub);margin-bottom:6px;">Subtitle</div>
          <input id="brandSubtitle" class="pro-input" placeholder="2025-2026 Digital Agenda" maxlength="40" oninput="updateBrandSubtitle(this.value)" />
        </div>
        <!-- Dashboard Tagline -->
        <div>
          <div style="font-size:11px;font-weight:700;text-transform:uppercase;letter-spacing:0.8px;color:var(--lux-text-sub);margin-bottom:6px;">Dashboard Tagline</div>
          <input id="brandTagline" class="pro-input" placeholder="Elite Athlete Dashboard" maxlength="40" oninput="updateBrandTagline(this.value)" />
        </div>
        <button class="ghost-btn" onclick="resetBranding()" style="font-size:11px;">â†º Reset to Default Branding</button>
      </div>
    </div>
    <div class="settings-group">
      <h3>Premium Themes</h3>
      <div id="themeGrid" style="display: grid; grid-template-columns: 1fr; gap: 12px;"></div>
    </div>
    <div class="settings-group">
      <h3>Display Options</h3>
      <div style="display: flex; gap: 8px; flex-direction: column;">
        <button id="darkModeToggle" class="ghost-btn"><span class="ui-icon" aria-hidden="true"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M14 3a8.5 8.5 0 108 11.5A9 9 0 0114 3z"/></svg></span>Dark Mode</button>
        <button id="dyslexiaToggle" class="ghost-btn">Aa Dyslexia Font</button>
      </div>
    </div>
  </div>
</div>
<div id="mobileSidebarBackdrop" class="mobile-sidebar-backdrop"></div>
<div id="settingsPanelBackdrop" style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.3); z-index: 999; opacity: 0; pointer-events: none; transition: opacity 0.3s ease;"></div>
<div id="onboardingOverlay" class="onboarding-overlay" role="dialog" aria-modal="true" aria-labelledby="onboardingTitle">
  <div class="onboarding-card" tabindex="-1" id="onboardingCard">
    <div class="onboarding-progress" id="onboardingProgress">Step 1 of 4</div>
    <section class="onboarding-step active" data-onboarding-step="1">
      <h3 id="onboardingTitle">Welcome to FocusFlex</h3>
      <p>Your calm, structured agenda for managing classes, assignments, notes, and focus sessions.</p>
    </section>
    <section class="onboarding-step" data-onboarding-step="2">
      <h3>How this helps</h3>
      <p>Use Dashboard for priorities, Log Homework for quick task capture, and Notes for study prep.</p>
    </section>
    <section class="onboarding-step" data-onboarding-step="3">
      <h3>Schedule setup guidance</h3>
      <p>Pick your day cycle (A/B/C or 1/2/3), then add periods by day tab. You can load an editable example template anytime.</p>
    </section>
    <section class="onboarding-step" data-onboarding-step="4">
      <h3>Your data and storage</h3>
      <p>Data is saved on this device using local storage. A cloud sync placeholder is ready for future account sync.</p>
    </section>
    <div class="onboarding-actions">
      <button class="ghost-btn" type="button" id="onboardingBackBtn" onclick="advanceOnboarding(-1)">Back</button>
      <button class="primary-btn" type="button" id="onboardingNextBtn" onclick="advanceOnboarding(1)">Next</button>
    </div>
  </div>
</div>


<!-- CONFIRM DIALOG -->
<div id="confirmOverlay" class="confirm-overlay" onclick="if(event.target===this)dismissConfirm()">
  <div class="confirm-box">
    <div class="confirm-icon" id="confirmIcon">âš ï¸</div>
    <div class="confirm-title" id="confirmTitle">Are you sure?</div>
    <div class="confirm-msg" id="confirmMsg">This action cannot be undone.</div>
    <div class="confirm-actions">
      <button class="confirm-cancel" onclick="dismissConfirm()">Cancel</button>
      <button class="confirm-delete" id="confirmBtn" onclick="executeConfirm()">Delete</button>
    </div>
  </div>
</div>

  </div>

  <!-- MOBILE NAV -->

  <nav class="mobile-nav" aria-label="Mobile navigation">
    <button title="Go to landing page" aria-label="Go to landing page" onclick="goToLanding()"><span class="ui-icon" aria-hidden="true"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M4 4h16v16H4z"/><path d="M8 9h8M8 13h5"/></svg></span>Landing</button>
    <button title="Dashboard" aria-label="Open Dashboard" onclick="switchSection('profile')"><span class="ui-icon" aria-hidden="true"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M3 11.5L12 4l9 7.5"/><path d="M5 10.5V20h14v-9.5"/></svg></span>Home</button>
    <button title="Log Homework" aria-label="Open Log Homework" onclick="switchSection('agenda')"><span class="ui-icon" aria-hidden="true"><svg viewBox="0 0 24 24" aria-hidden="true"><rect x="4" y="4" width="16" height="16" rx="3"/><path d="M8 12.5l2.5 2.5L16 9.5"/></svg></span>Homework</button>
    <button title="Schedule" aria-label="Open Schedule" onclick="switchSection('schedule')"><span class="ui-icon" aria-hidden="true"><svg viewBox="0 0 24 24" aria-hidden="true"><rect x="3" y="5" width="18" height="16" rx="3"/><path d="M8 3v4M16 3v4M3 10h18"/></svg></span>Schedule</button>
    <button title="Appointments" aria-label="Open Appointments" onclick="switchSection('appointments')"><span class="ui-icon" aria-hidden="true"><svg viewBox="0 0 24 24" aria-hidden="true"><rect x="3" y="4" width="18" height="17" rx="3"/><path d="M8 2v4M16 2v4M3 10h18"/><path d="M8 14h3M8 17h5"/></svg></span>Appointments</button>
    <button title="Notes" aria-label="Open Notes" onclick="switchSection('notes')"><span class="ui-icon" aria-hidden="true"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M6 3h9l5 5v13H6z"/><path d="M15 3v5h5"/><path d="M9 13h6M9 17h6"/></svg></span>Notes</button>
    <button title="Quick Links" aria-label="Open Quick Links" onclick="switchSection('links')"><span class="ui-icon" aria-hidden="true"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M10 14l-1.5 1.5a3.5 3.5 0 01-5-5L7 7a3.5 3.5 0 015 5L10.5 13"/><path d="M14 10l1.5-1.5a3.5 3.5 0 015 5L17 17a3.5 3.5 0 01-5-5l1.5-1.5"/></svg></span>Links</button>
  </nav>

</div>
<script>
function toggleApptForm() {
  var f = document.getElementById('apptForm');
  if (!f) return;
  f.style.display = f.style.display === 'none' ? 'block' : 'none';
  if (f.style.display === 'block') {
    var t = document.getElementById('apptTitle');
    if (t) setTimeout(function(){ t.focus(); }, 50);
  }
}

function addAppointment() {
  var title    = (document.getElementById('apptTitle')    || {}).value || '';
  var date     = (document.getElementById('apptDate')     || {}).value || '';
  var time     = (document.getElementById('apptTime')     || {}).value || '';
  var location = (document.getElementById('apptLocation') || {}).value || '';
  var notes    = (document.getElementById('apptNotes')    || {}).value || '';
  title = title.trim(); location = location.trim(); notes = notes.trim();
  if (!title) { alert('Please enter a title for the appointment.'); return; }
  if (!date)  { alert('Please select a date for the appointment.');  return; }
  var appts = [];
  try { appts = JSON.parse(localStorage.getItem('ff_appointments') || '[]'); } catch(e) {}
  appts.push({ id: Date.now(), title: title, date: date, time: time, location: location, notes: notes });
  appts.sort(function(a, b) {
    return new Date(a.date + 'T' + (a.time || '00:00')) - new Date(b.date + 'T' + (b.time || '00:00'));
  });
  localStorage.setItem('ff_appointments', JSON.stringify(appts));
  ['apptTitle','apptDate','apptTime','apptLocation','apptNotes'].forEach(function(id) {
    var el = document.getElementById(id); if (el) el.value = '';
  });
  toggleApptForm();
  renderAppointments();
}

function deleteAppointment(id) {
  var appts = [];
  try { appts = JSON.parse(localStorage.getItem('ff_appointments') || '[]'); } catch(e) {}
  appts = appts.filter(function(a) { return a.id !== id; });
  localStorage.setItem('ff_appointments', JSON.stringify(appts));
  renderAppointments();
}

function _apptFormatTime(t) {
  if (!t) return '';
  var parts = t.split(':'), h = parseInt(parts[0], 10), m = parts[1];
  return (h % 12 || 12) + ':' + m + ' ' + (h < 12 ? 'AM' : 'PM');
}

function _apptFormatDate(d) {
  var p = d.split('-');
  return new Date(parseInt(p[0]), parseInt(p[1])-1, parseInt(p[2]))
    .toLocaleDateString('en-US', { weekday:'short', month:'short', day:'numeric', year:'numeric' });
}

function _escHtml(str) {
  return String(str).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;');
}

function renderAppointments() {
  var list = document.getElementById('apptList');
  if (!list) return;
  var appts = [];
  try { appts = JSON.parse(localStorage.getItem('ff_appointments') || '[]'); } catch(e) {}
  if (!appts.length) {
    list.innerHTML = '<div class="empty-msg">No appointments yet. Click <strong>+ Add Appointment</strong> to get started.</div>';
    return;
  }
  var today = new Date(); today.setHours(0,0,0,0);
  list.innerHTML = appts.map(function(a) {
    var isPast = new Date(a.date + 'T00:00') < today;
    var meta = 'ðŸ“… ' + _apptFormatDate(a.date);
    if (a.time) meta += '&nbsp;&nbsp;ðŸ• ' + _apptFormatTime(a.time);
    if (a.location) meta += '&nbsp;&nbsp;ðŸ“ ' + _escHtml(a.location);
    return '<div class="task-item" style="border-left-color:' + (isPast ? 'var(--lux-border)' : 'var(--brand-blue)') + ';' + (isPast ? 'opacity:0.55;' : '') + '">' +
      '<div class="task-body">' +
        '<div class="task-title">' + _escHtml(a.title) + (isPast ? ' <span style="font-size:10px;color:var(--lux-text-sub);font-weight:500;">(past)</span>' : '') + '</div>' +
        '<div class="task-meta">' + meta + '</div>' +
        (a.notes ? '<div class="task-meta" style="margin-top:4px;">' + _escHtml(a.notes) + '</div>' : '') +
      '</div>' +
      '<div class="task-actions"><button class="danger-btn" onclick="deleteAppointment(' + a.id + ')">Delete</button></div>' +
    '</div>';
  }).join('');
}

(function() {
  function hookSwitch() {
    if (typeof window.switchSection === 'function') {
      var orig = window.switchSection;
      window.switchSection = function(sec) { orig(sec); if (sec === 'appointments') renderAppointments(); };
    }
  }
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', function() { renderAppointments(); setTimeout(hookSwitch, 300); });
  } else {
    renderAppointments(); setTimeout(hookSwitch, 300);
  }
})();
</script>
<script src="app.js" defer></script>
</body>
</html>
